(function(){var e=true,p=null,r=false,u=document,v=window.i={},y=navigator.userAgent.toLowerCase(),ba=(y.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],ca=/webkit/.test(y),z=/opera/.test(y),A=/msie/.test(y)&&!/opera/.test(y),B=r,C=r,D=[];function E(){if(!C&&(C=e,D)){for(var a=0;a<D.length;a++)D[a].call(window,[]);D=[]}}function da(){var a=E,c=window.onload;window.onload=typeof window.onload!="function"?a:function(){c&&c();a()}}
function I(){if(!B){B=e;u.addEventListener&&!z&&u.addEventListener("DOMContentLoaded",E,r);A&&window==top&&function(){if(!C){try{u.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}E()}}();z&&u.addEventListener("DOMContentLoaded",function(){if(!C){for(var a=0;a<u.styleSheets.length;a++)if(u.styleSheets[a].disabled){setTimeout(arguments.callee,0);return}E()}},r);if(ca){var a;(function(){if(!C)if(u.readyState!="loaded"&&u.readyState!="complete")setTimeout(arguments.callee,
0);else{if(a===void 0){for(var c=u.getElementsByTagName("link"),d=0;d<c.length;d++)c[d].getAttribute("rel")=="stylesheet"&&a++;a+=u.getElementsByTagName("style").length}u.styleSheets.length!=a?setTimeout(arguments.callee,0):E()}})()}da()}}v.ready=function(a){I();C?a.call(window,[]):D.push(function(){return a.call(window,[])})};I();var J,K="wumii-hook",M="wurl",ea="wtitle",P=r,Q=(typeof wumiiDebugServer!="undefined"?wumiiDebugServer:"http://app.wumii.com")+"/ext/";
if(!A&&!R()&&(typeof wumiiEnableCustomPos=="undefined"||!wumiiEnableCustomPos||u.getElementById("wumiiDisplayDiv")))try{S(),P=e}catch(fa){}v.ready(function(){P||(P=e,S())});function R(){if(/\.jimdo\.com$/.test(location.hostname))return e;for(var a=u.getElementsByTagName("link"),c=0;c<a.length;c++){var d=a[c].href;if(d.indexOf("http://u.jimdo.com/")!=-1||d.indexOf("http://s.jimdo.com/")!=-1)return e}return r}
function S(){function a(){J=ga(c);if(J.length==1){var a=J[0];if(a.h())a.c.style.display="none";T(a.b(),a.d(),a.a)}else U(),ha()}var c=ia();if(c.length==0){var d=u.createElement("div");d.className=K;c.push(d);if(R()){if(!/\d{4}\/\d{2}\/\d{2}/.test(u.location.href))return;for(var b=u.getElementById("content_area").getElementsByTagName("div"),f=0;f<b.length;f++)if(b[f].id.indexOf("cc-matrix")!=-1){b[f].appendChild(d);break}}else{var n=u.getElementById("wumiiRelatedItems");if(typeof wumiiParams!="undefined"&&
wumiiParams.indexOf("pf=CNBLOGS")!=-1)(function(){var c=u.getElementById("MySignature");if(c.length==0||c.innerHTML=="")setTimeout(arguments.callee,25);else{for(var c=c.children,b=0;b<c.length;b++)if(c[b].id=="wumiiRelatedItems"){n=c[b];break}n&&(n.parentNode.insertBefore(d,n),a())}})();else{if(!n)return;if((b=n.getAttribute("src"))&&b.indexOf("pf=Z-Blog")!=-1||typeof wumiiParams!="undefined"&&wumiiParams.indexOf("pf=Z-Blog")!=-1)return;n.parentNode.insertBefore(d,n)}}}a()}
function ia(){for(var a=u.getElementsByTagName("div"),c=[],d=0;d<a.length;d++)a[d].className==K&&c.push(a[d]);return c}
function ga(a){function c(a){function c(a,d){for(var b=a.c.getElementsByTagName("input"),f=0;f<b.length;f++)if(b[f].getAttribute("name")==d)return b[f].getAttribute("value");return""}this.c=a;this.a=this.e=r;this.j=function(){return this.c};this.l=function(){return this.e};this.f=function(){this.e=e};this.k=function(){return this.a};this.b=function(){var a=c(this,M);/^\//.test(a)&&typeof wumiiSitePrefix!="undefined"&&wumiiSitePrefix?a=wumiiSitePrefix+a:/^http/.test(a)||(a="");!a&&typeof wumiiPermaLink!=
"undefined"&&wumiiPermaLink&&(a=wumiiPermaLink);return!a?(this.a=e,location.href):a};this.d=function(){var a=c(this,ea);!a&&typeof wumiiTitle!="undefined"&&(a=wumiiTitle);return a?a:u.title};this.h=function(){var a=this.b().toLowerCase();return a.indexOf("http://big5.ifeng.com/gate/big5/blog.ifeng.com/")==0||a.indexOf("http://www.umiwi.com/")==0}}for(var d=[],b=0;b<a.length;b++)d[b]=new c(a[b]);return d}
function T(a,c,d){var b="&num=4&mode=3&v="+encodeURIComponent("")+("&pf="+encodeURIComponent(""))+("&theme="+encodeURIComponent("")),a=Q+"related_items_v2?url="+encodeURIComponent(a)+"&title="+encodeURIComponent(c)+"&fromlocation="+encodeURIComponent(d);(c=u.referrer)&&(a+="&refer="+encodeURIComponent(c));typeof wumiiParams!="undefined"?(wumiiParams.indexOf("pf=WordPress")!=-1&&(wumiiParams=wumiiParams.replace(/&#038;/g,"&")),a+=wumiiParams):a+=b;typeof wumiiSitePrefix!=
"undefined"&&wumiiSitePrefix&&(a+="&sitePrefix="+encodeURIComponent(wumiiSitePrefix));b=u.createElement("script");b.type="text/javascript";b.src=a;u.getElementsByTagName("head")[0].appendChild(b)}
function U(){for(var a=0;a<J.length;a++){var c=J[a],d;if(c.e)d=r;else{d=window.innerHeight||u.documentElement.clientHeight;for(var b=c.c,f=0;b!=p;)f+=b.offsetTop,b=b.offsetParent;b=f-(window.pageYOffset||u.documentElement.scrollTop||u.body.scrollTop||0);d=b>=-400&&b<=800+d}d&&(c.f(),T(c.b(),c.d(),c.a))}}
function ha(){if(window.addEventListener)window.addEventListener("scroll",function(){U()},r),window.addEventListener("resize",function(){U()},r);else if(window.attachEvent)window.attachEvent("onscroll",function(){U()}),window.attachEvent("onresize",function(){U()});else if(u.getElementById)window.onload=function(){for(var a=0;a<J.length;a++)wumiiDiv.f(),T(wumiiDiv.b(),wumiiDiv.d(),wumiiDiv.a)}}
function V(a,c,d){a.addEventListener?a.addEventListener(c,d,r):a.attachEvent?a.attachEvent("on"+c,function(){d.apply(a,arguments)}):a["on"+c]=d}
function ka(a,c){function d(a,d){var b=(a.lastElementChild||a.lastChild).offsetWidth,f=b/15,t=d=="out",s=t?0:-b;w=e;(function(){if(s<=0&&s>=-b)t?s-=f:s+=f,a.style[c]=s+"px",setTimeout(arguments.callee,1);else{var d="";t?(q=r,d="0 0"):(q=e,d="-"+(N+1)+"px 0");w=r;s=t?-b:0;a.style[c]=s+"px";a.children[0].children[0].style.backgroundPosition=d}})()}function b(a){var c=a.className=="wumii-popup-relatedItems",b=u.documentElement.clientHeight||u.body.clientHeight,f=u.documentElement.scrollHeight||u.body.scrollHeight;
c&&f<b&&d(a,"in");var t=a.style.position,s=a.offsetTop,n=window.onscroll;window.onscroll=function(){n&&n();var b=window.pageYOffset||u.documentElement.scrollTop||u.body.scrollTop;if(t=="absolute")a.style.top=b+parseInt(s)+"px";if(!w&&!F&&c){var f=u.documentElement.clientHeight||u.body.clientHeight,G=(u.documentElement.scrollHeight||u.body.scrollHeight)*2/3;b+f>=G&&!q?d(a,"in"):b+f<G&&q&&d(a,"out")}}}function f(a){V(a.children[0].children[0],"click",function(){w||(F=e,q?d(this.parentNode.parentNode,
"out"):d(this.parentNode.parentNode,"in"))})}function n(a,c){var b=true,d=b?"fromElement":"toElement";V(a,b?"mouseover":"mouseout",function(b){var b=b||window.event,f=b.target||b.srcElement,b=b.relatedTarget||b[d];(a===f||(a.contains?a.contains(f):a.compareDocumentPosition(f)&16))&&!(a.contains?a.contains(b):a.compareDocumentPosition(b)&16)&&c()})}function L(a){n(a,function(){!w&&!q&&!q&&d(a,"in")})}var w=r,q=r,F=r,N=a.children[0].offsetWidth;this.g=function(){f(a);L(a);b(a)}}
window.wumiiRelatedItems=function(a,c,d,b){function f(a,b){var c=u.getElementById("wumiiData");c&&(c.parent||c.parentNode).removeChild(c);var c=u.getElementsByTagName("head")[0],j=u.createElement("script");j.setAttribute("type","text/javascript");j.setAttribute("id","wumiiData");j.setAttribute("src",a);c.appendChild(j);b&&b()}function n(a){var b=a.children[0];b.innerHTML=parseInt(b.innerHTML)+1;a.onmouseover=function(){};a.onmouseout=function(){};a.style.backgroundPosition="-178px 0";Z=e}function L(l){var b=
r;V(l.children[1],"click",function(){if(!Z&&(f(Q+"like?ts="+(new Date).getTime()+"&url="+encodeURIComponent(H),function(){n(l)}),!(c=="true"||d=="false"))){var x=u.getElementById("wumiiLoginTipsDiv");if(x){var j=x.style;if(b)j.display="block";else{b=e;j.left="-9999px";j.display="block";var h=x.parentNode.parentNode;if((h.currentStyle?h.currentStyle.overflow:u.defaultView.getComputedStyle(h,p).overflow)=="hidden")h.style.overflow="visible";var h=l.offsetLeft,O=l.offsetTop,k=parseInt(l.style.width),
g=x.offsetHeight,m=(parseInt(j.width)-k)/2;h>=m?j.left=h-m+"px":(j.left=h+"px",m=x.children[1].style,m.margin="0px",m.left=h+k/2-10+"px");O-=g;typeof u.body.style.maxHeight!="undefined"&&(O-=20);j.top=O+"px";V(u.getElementById("wumiiCloseLoginTips"),"click",function(){j.display="none"});if(u.getElementById("wumiiBindingBtns")){var o=p;V(u.getElementById("wumiiLoginTipsContent"),"click",function(l){l=l||window.event;l=l.target||l.srcElement;if(l.nodeName=="A")if(l.id=="wumiiNoTipsBtn")f(Q+"login/disable"),
x.parentNode.removeChild(x);else if(l.className=="wumii-reg-btn"||l.className=="wumii-binding-btn")o!=p&&clearInterval(o),o=setInterval(function(){f(Q+"login/check?url="+a)},1500),window.loginedCheck=o})}}}}})}function w(a){V(a,"click",function(){var a=Q+"recommendations?ts="+(new Date).getTime()+"&url="+encodeURIComponent(H);u.getElementById("wumiiLoading").style.display="inline";typeof wumiiSitePrefix!="undefined"&&(a+="&sitePrefix="+encodeURIComponent(wumiiSitePrefix));f(a)})}function q(){return"http://static.wumii.cn/resources/images/related_item_default/"+
(Math.floor(Math.random()*100)+1)+".jpg"}function F(a){var b=window.JSON;return b&&b.parse?b.parse(a):eval("("+a+")")}function N(a,b){V(a,"mousedown",function(){var a=this.getAttribute("href"),l=this.getAttribute("origLink"),c=this.getAttribute("redirectUrl");l||(this.setAttribute("origLink",a),V(this,"mouseup",function(){var a=this;setTimeout(function(){a.setAttribute("href",a.getAttribute("origLink"))},50);if(A&&/6.0|7.0|8.0/.test(ba))a.getAttribute("target")=="_blank"?window.open(a.getAttribute("href")):
location.href=a.getAttribute("href")}),l=this.getAttribute("origLink"));c||(c="http://app.wumii.com/ext/redirect?url="+encodeURIComponent(l)+"&ts="+(new Date).getTime()+"&from="+b+"&ref=relatedItems");this.setAttribute("href",c)})}function ja(a){V(a,"mouseover",function(){this.style.borderTopColor="#ffaf00"});V(a,"mouseout",function(){this.style.borderTopColor="#327dc8"})}function W(a,c,d){for(var j=d.getAttribute("fromUrl"),h=0;h<a.length;h++){var f=a[h],k=new String(c),k=k.replace(/{w:(\w+)}/g,
function(a,b){return(!f[b]?"":f[b].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"))||""}),g=u.createElement("div");g.innerHTML=k;k=g.children[0];if(b)g=["b3786b","d2c1a8","d46646","d28fa8","c84f54"],k.children[0].children[0].style.background="#"+g[h%g.length];if(g=k.getElementsByTagName("img")[0]){var m=f.thumbnailUrl;m?g.setAttribute("wsrc",m):b&&(g.parentNode.removeChild(g),g=p)}if(k.className=="wumii-text-li"&&k.getElementsByTagName("span")[0]&&
(g=k.getElementsByTagName("span")[0],g.className=="wumii-hot-item"&&(g.appendChild(u.createTextNode(h+1)),h<3)))g.style.backgroundPosition="-16px 0";g=k;g.nodeName!=="A"&&(g=g.getElementsByTagName("a")[0]);f.openInNewWindow&&g.setAttribute("target","_blank");d.appendChild(k);N(g,j);k.className==="wumii-popup-item"&&ja(k)}}function G(a,b,c,d,h){var f=b.children[0];if(h)b.className=h;if(d)f.innerHTML=d;W(a,c,b.children[1]);return b}function X(a,b,c){if(c.length==0)return"";var d=u.createElement("div");
d.innerHTML=a;a=d.children[0];W(c,b,(a.lastElementChild||a.lastChild).children[0]);u.body.appendChild(a);b=a.getAttribute("wid");c=a.children[0];d=a.lastElementChild||a.lastChild;a.style[b]=-d.offsetWidth+"px";if(!a.style.width)a.style.width=d.offsetWidth+c.offsetWidth+"px";if(d.offsetHeight<132)d.style.height="132px";(new ka(a,b)).g();return a}function t(a,b){var c=a.lastElementChild||a.lastChild,d=c.lastElementChild||c.lastChild;if(d.className=="wumii-footer"){var h=d.children[1];if(h){var f=parseInt(c.getAttribute("wmode")),
k=h.getAttribute("item-width"),c=h.getAttribute("wsrc"),g=new Image;g.onload=function(){if(f!=1&&b>0){var a=d.offsetWidth+1;a>0&&a/k<b&&(b=parseInt(a/k));d.style.width=k*b-1+"px"}g.parentNode.removeChild(g)};d.appendChild(g);d.removeChild(h);g.src=c}d.children[0].style.display="inline"}}function s(a){if(a)for(var a=a.getElementsByTagName("img"),b=0,c=a.length;b<c;b++){var d=a[b];if(d.className=="wumii-image")d.onload=function(){var a,b,c=this.width;b=this.height;var d=this.parentNode.offsetWidth-
6,l=this.parentNode.offsetHeight-6;c/d>b/l?(a=c*l/b,b=l):(a=d,b=b*d/c);var f=(a-d)/2,j=(b-l)/2,c=this.style;c.left=-f+2+"px";c.top=-j+2+"px";c.width=a+"px";c.height=b+"px";c.clip="rect("+j+"px "+(f+d)+"px "+(j+l)+"px "+f+"px)";if(window.XMLHttpRequest==void 0&&ActiveXObject!=void 0){a=this.parentNode.getElementsByTagName("shape");for(d=0;d<a.length;d++)a[d].style.display="none"}c.visibility="visible"},d.onerror=function(){this.onerror="";this.src=q()},d.src=d.getAttribute("wsrc")||q()}}function Y(a,
b){a.appendChild(b.html);t(a,b.itemsSize);s(a)}var H=J[0].b(),Z=r,aa=r;this.init=function(c,d,f,j,h,n,k){var f=F(f),g;var m=f.mainItems;g=f.outboundItems;var o=m.length;if(o==0)g="";else{var q=u.createElement("div");q.id="wumiiTemplateHtml";q.innerHTML=c;var c=q.children[0],q=c.lastElementChild||c.lastChild,t=c.children[0],m=G(m,t.cloneNode(e),d);c.insertBefore(m,q);g instanceof Array&&g.length>0&&(m=G(g,t.cloneNode(e),d,"\u6765\u81ea\u65e0\u89c5\u7f51\u7edc\u7684\u76f8\u5173\u6587\u7ae0","wumii-external"),
c.insertBefore(m,q),o=Math.max(o,g.length));c.removeChild(t);g={html:c,itemsSize:o}}if(g!=""){m=u.getElementsByTagName("div");o=[];for(c=0;c<m.length;c++)m[c].className==K&&o.push(m[c]);if(o.length==1){m=o[0];o=u.getElementById("wumiiDisplayDiv");if(typeof wumiiEnableCustomPos=="undefined"||!wumiiEnableCustomPos||!o)o=m;(m=u.getElementById("wumiiLikeRecBtnDiv"))?m.innerHTML=j:o.innerHTML=j;Y(o,g);if(h!="")j=u.createElement("style"),j.type="text/css",j.styleSheet?(style.media="screen",j.styleSheet.cssText=
h):j.appendChild(u.createTextNode(h)),h=u.getElementsByTagName("head")[0],h.insertBefore(j,h.firstChild);!b&&f.popupItems&&s(X(n,k||d,f.popupItems))}else for(d=0;d<o.length;d++){a:{n=M;k=o[d].getElementsByTagName("input");for(h=0;h<k.length;h++)if(k[h].getAttribute("name")==n){n=k[h].getAttribute("value");break a}n=p}if(n==a){Y(o[d],g);break}}}};this.initButtons=function(){var a=u.getElementById("wumiiLikeBtnDiv"),b=u.getElementById("wumiiRecommendBtnDiv");btnsDiv=u.getElementById("wumiiBtnDiv");
if(a&&b)a.style.marginLeft=(btnsDiv.scrollWidth-a.scrollWidth-b.scrollWidth)/2+"px",L(a),w(b)};this.initPopupHotItems=function(a,b,c){s(X(a,b,F(c)))};this.loadPopupHotItems=function(){if(!aa){aa=e;if(!H)H=location.href;var a=Q+"widget/popup/hot?url="+encodeURIComponent(H);typeof wumiiSitePrefix!="undefined"&&wumiiSitePrefix&&(a+="&sitePrefix="+encodeURIComponent(wumiiSitePrefix));f(a)}}};})();
