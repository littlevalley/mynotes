<html><head><meta charset="UTF-8">

<title>[Python][PyQt4]PyQt4 中的事件和信号 - mirguest - C++博客 </title><meta http-equiv="Content-Type"></head><body style="background:#11303d;"><form style="margin:0px 0px 16px;" accept-charset="utf-8" method="POST" name="Form1" action="164984.html"><input name="__EVENTTARGET" type="hidden" value="" id="531"><input name="__EVENTARGUMENT" type="hidden" value="" id="532"><input name="__VIEWSTATE" type="hidden" value="" id="533"><div></div><table style="display:table;width:100%;text-indent:0px;border:1px solid #000000;background:#eeeeee;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;" colspan="2"><div style="width:100%;height:75px;background:#20375f;"><table style="display:table;width:100%;font-size:16px;text-indent:0px;" cellpadding="8" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;width:100%;font-size:12px;color:#ffffff;padding:8px;"><h1 style="font-size:21px;font-weight:bold;padding:5px 0px 0px;"><a style="color:#ffffff;margin:10px 0px 0px;" href="http://www.cppblog.com/mirguest/">mirguest</a></h1></td></tr></tbody></table></div><div style="width:100%;font-size:14px;color:#cccccc;text-align:right;padding:4px;background:#000001;"><div>随笔 - 41, 文章 - 8, 评论 - 6, 引用 - 0</div></div></td></tr></tbody></table><table style="display:table;width:100%;text-indent:0px;border:1px solid #000000;background:#eeeeee;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;width:200px;font-size:12px;"><div style="width:180px;height:100%padding:0px 0px 5px;"><h3 style="font-size:14px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #bbbbbb #ffffff;border-style: solid;padding:4px;">导航</h3><ul style="font-size:13px;list-style-type:none;margin:5px 5px 5px 8px;"><li style="display:block;margin:0px 0px 2px;"></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/">首页</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/admin/EditPosts.aspx?opt=1">新随笔</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/contact.aspx?id=1">联系</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/Rss.aspx"><img alt="RSS 2.0 Feed" src="xml.gif"></a><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/Rss.aspx">聚合</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/admin/EditPosts.aspx">管理</a></li></ul><table style="display:table;width:180px;height:180px;font-size:13px;text-indent:0px;border:1px solid #999999;margin:10px 0px;background:#eeeeee;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;background:#c0c0c0;" colspan="7"><table style="display:table;width:100%;height:100%font-size:14px;font-weight:bold;text-indent:0px;background:#b6b6b6;" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;width:15%;font-size:12px;padding:1px;"><a style="display:inline-block;color:#000000;" onclick="document.location.reload();return false;" href="javascript:__doPostBack('Calendar1$entryCal','V4383')" id="534">&lt;</a></td><td style="display:table-cell;width:69%;font-size:12px;text-align:center;padding:1px;" align="center">2012年2月</td><td style="display:table-cell;width:15%;font-size:12px;padding:1px;" align="right"><a style="display:inline-block;color:#000000;" onclick="document.location.reload();return false;" href="javascript:__doPostBack('Calendar1$entryCal','V4443')" id="535">&gt;</a></td></tr></tbody></table></td></tr><tr style="display:table-row;"><th style="display:table-cell;font-size:13px;font-weight:bold;text-align:left;padding:0px 5px 0px;background:#cccccc;" align="center" scope="no">日</th><th style="display:table-cell;font-size:13px;font-weight:bold;text-align:left;padding:0px 5px 0px;background:#cccccc;" align="center" scope="no">一</th><th style="display:table-cell;font-size:13px;font-weight:bold;text-align:left;padding:0px 5px 0px;background:#cccccc;" align="center" scope="no">二</th><th style="display:table-cell;font-size:13px;font-weight:bold;text-align:left;padding:0px 5px 0px;background:#cccccc;" align="center" scope="no">三</th><th style="display:table-cell;font-size:13px;font-weight:bold;text-align:left;padding:0px 5px 0px;background:#cccccc;" align="center" scope="no">四</th><th style="display:table-cell;font-size:13px;font-weight:bold;text-align:left;padding:0px 5px 0px;background:#cccccc;" align="center" scope="no">五</th><th style="display:table-cell;font-size:13px;font-weight:bold;text-align:left;padding:0px 5px 0px;background:#cccccc;" align="center" scope="no">六</th></tr><tr style="display:table-row;"><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">29</td><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">30</td><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">31</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">1</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">2</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2012/02/03.html"><u>3</u></a></td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">4</td></tr><tr style="display:table-row;"><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2012/02/05.html"><u>5</u></a></td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">6</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">7</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">8</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">9</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">10</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">11</td></tr><tr style="display:table-row;"><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2012/02/12.html"><u>12</u></a></td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">13</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">14</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">15</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">16</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">17</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">18</td></tr><tr style="display:table-row;"><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">19</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">20</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">21</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">22</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">23</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">24</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">25</td></tr><tr style="display:table-row;"><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">26</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">27</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">28</td><td style="display:table-cell;width:14%;font-size:12px;text-align:center;" align="center">29</td><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">1</td><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">2</td><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">3</td></tr><tr style="display:table-row;"><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">4</td><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">5</td><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">6</td><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">7</td><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">8</td><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">9</td><td style="display:table-cell;width:14%;font-size:12px;color:#808080;text-align:center;" align="center">10</td></tr></tbody></table><h3 style="font-size:14px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #bbbbbb #ffffff;border-style: solid;padding:4px;">留言簿<span style="font-size:11px;font-weight:normal;">(1)</span></h3><ul style="font-size:13px;list-style-type:none;margin:5px 5px 5px 8px;"><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/Contact.aspx?id=1">给我留言</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/default.aspx?opt=msg">查看公开留言</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/admin/MyMessages.aspx">查看私人留言</a></li></ul><h3 style="font-size:14px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #bbbbbb #ffffff;border-style: solid;padding:4px;">随笔分类<span style="font-size:11px;font-weight:normal;">(18)</span></h3><ul style="font-size:13px;list-style-type:none;margin:5px 5px 5px 8px;"><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/category/15953.html">C++(1)</a><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/category/15953.html/rss">(rss)</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/category/15952.html">Python(17)</a><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/category/15952.html/rss">(rss)</a></li></ul><h3 style="font-size:14px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #bbbbbb #ffffff;border-style: solid;padding:4px;">随笔档案<span style="font-size:11px;font-weight:normal;">(41)</span></h3><ul style="font-size:13px;list-style-type:none;margin:5px 5px 5px 8px;"><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2012/06.html">2012年6月 (1)</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2012/05.html">2012年5月 (1)</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2012/02.html">2012年2月 (14)</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2011/02.html">2011年2月 (24)</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2011/01.html">2011年1月 (1)</a></li></ul><h3 style="font-size:14px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #bbbbbb #ffffff;border-style: solid;padding:4px;">文章分类<span style="font-size:11px;font-weight:normal;">(8)</span></h3><ul style="font-size:13px;list-style-type:none;margin:5px 5px 5px 8px;"><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/category/15955.html">C++(2)</a><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/category/15955.html/rss">(rss)</a></li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/category/15954.html">python(6)</a><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/category/15954.html/rss">(rss)</a></li></ul><h3 style="font-size:14px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #bbbbbb #ffffff;border-style: solid;padding:4px;">文章档案<span style="font-size:11px;font-weight:normal;">(8)</span></h3><ul style="font-size:13px;list-style-type:none;margin:5px 5px 5px 8px;"><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archives/2011/02.html">2011年2月 (8)</a></li></ul><h3 style="font-size:14px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #bbbbbb #ffffff;border-style: solid;padding:4px;">搜索</h3><ul style="font-size:13px;list-style-type:none;margin:5px 5px 5px 8px;"><li style="display:block;margin:0px 0px 2px;"></li><li style="display:block;margin:0px 0px 2px;"><input style="width:130px;font-size:14px;font-weight:bold;color:#000000;border:1px solid #;padding:1px 0px;" name="q" type="text" id="536"> <input style="font-size:14px;font-weight:bold;color:#000000;text-align:center;white-space:pre;border:1px solid #;padding:0px 6px;background:#38fa83;" name="sa" onclick="document.location.reload();" type="button" value="搜索" id="537"></li></ul><h3 style="font-size:14px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #bbbbbb #ffffff;border-style: solid;padding:4px;">最新评论 <a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/CommentsRSS.aspx"><img src="xml.gif"></a></h3><div style="width:180px;"><ul style="font-size:13px;list-style-type:none;margin:5px 5px 5px 8px;"><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2015/03/25/164981.html#210161">1. re: [Python][PyQt4]第一个 PyQt4 的程序</a></li><li style="display:block;margin:0px 0px 2px;">非常感谢！！！楼主的分享~ </li><li style="display:block;text-align:right;margin:0px 4px 2px;">--ywj</li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2013/06/22/165390.html#201228">2. re: [Python][PyQt4]在 PyQt4 中绘图</a></li><li style="display:block;margin:0px 0px 2px;">写得很好楼主！很适合我这种小白。。<br>国内pyqt的例子太少了。。<br>我想问一下如何将特定的事件消息比如按下按钮的消息映射到paintEvent里面？可以给个例子吗？ </li><li style="display:block;text-align:right;margin:0px 4px 2px;">--jiuyungchaan</li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2013/04/04/164982.html#199097">3. re: [Python][PyQt4]在 PyQt4 中的菜单和工具栏[未登录]</a></li><li style="display:block;margin:0px 0px 2px;">我想问题下，QMainWindow 跟 QWidget 两个怎么搭配用， 也就是说，那些widget里面的东西怎么跟mainwindow放一块去？<br></li><li style="display:block;text-align:right;margin:0px 4px 2px;">--西丁</li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2013/01/24/164981.html#197543">4. re: [Python][PyQt4]第一个 PyQt4 的程序</a></li><li style="display:block;margin:0px 0px 2px;">谢谢博主，帮助非常大 </li><li style="display:block;text-align:right;margin:0px 4px 2px;">--Laisky</li><li style="display:block;margin:0px 0px 2px;"><a style="display:inline-block;color:#000000;" href="http://www.cppblog.com/mirguest/archive/2012/04/04/164981.html#170042">5. re: [Python][PyQt4]第一个 PyQt4 的程序[未登录]</a></li><li style="display:block;margin:0px 0px 2px;">不错学习了 ！ </li><li style="display:block;text-align:right;margin:0px 4px 2px;">--zhang</li></ul></div></div></td><td style="display:table-cell;font-size:12px;border-width: 0px 0px 1px 1px;border-color: #ffffff #ffffff #dddddd #dddddd;border-style: solid;padding:10px;background:#ffffff;"><div><div style="font-size:14px;line-height:21px;border-width: 1px 1px 1px 1px;border-color: #cccccc #cccccc #cccccc #cccccc;border-style: solid;margin:0px 0px 28px;padding:4px;"><h2 style="font-size:14px;font-weight:bold;margin:0px 0px 4px;"><a style="color:#355f7c;" href="164984.html">[Python][PyQt4]PyQt4 中的事件和信号</a></h2><div><div style="background:#1c4e63;"><div style="width:100%;float:left;"><div><div style="padding:0px 20px 30px 20px;background:#ffffff;"><div><h1 style="font-size:28px;font-weight:normal;color:#20435c;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #cccccc #ffffff;border-style: solid;margin:0px -20px 10px -20px;padding:3px 0px 3px 10px;background:#f2f2f2;">PyQt4 中的事件和信号</h1><p style="line-height:18px;margin:0px 0px 14px;">在本部分，我们将会探讨事件和信号。</p><div><h2 style="font-size:14px;font-weight:normal;color:#20435c;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #cccccc #ffffff;border-style: solid;margin:20px -20px 10px -20px;padding:3px 0px 3px 10px;background:#f2f2f2;">事件</h2><p style="line-height:18px;margin:0px 0px 14px;">在任何的 GUI 程序中，事件是很重要的部分。事件是由用户或操作系统产生的。当我们调用应用的 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>exec_()</span></tt>时，应用就进入了主循环。主循环会接受事件并且把它们发送给对象。Trolltech 引入了一个独特的信号和槽机制。</p><p style="line-height:18px;margin:0px 0px 14px;">事件是任何 GUI 程序中很重要的部分。所有 GUI 应用都是事件驱动的。一个应用对其生命期产生的不同的事件类型做出反应。事件是主要由应用的用户产生。但是，也可以通过其他方法产生，比如，网络通信，窗口的管理者，计时器。在事件模型中，有三个参与者：</p><ul style="margin:14px 0px;padding:0px 0px 0px 14px;"><li style="line-height:18px;">事件源（event source）</li><li style="line-height:18px;">事件对象（event object）</li><li style="line-height:18px;">事件目标（event target）</li></ul><p style="line-height:18px;margin:0px 0px 14px;"><strong style="font-weight:bold;">event source</strong>是那些状态改变的对象。它产生事件。而 <strong style="font-weight:bold;">event object</strong>（Event）封装了事件源的状态改变。而 <strong style="font-weight:bold;">event target</strong>则是需要被通知的。事件源把处理事件的任务委托给了事件目标。</p><p style="line-height:18px;margin:0px 0px 14px;">当我们调用了应用的 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>exec_()</span></tt>方法，应用就进入主循环了。主循环接受事件然后把他们发送给对象。信号和槽用于对象间的通信。当特定的事件发生时 <strong style="font-weight:bold;">信号</strong>就被发送了。而 <strong style="font-weight:bold;">槽</strong>则是任何 Python 中可调用的。当信号发送给了这个槽，槽就被调用了。</p></div><div><h2 style="font-size:14px;font-weight:normal;color:#20435c;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #cccccc #ffffff;border-style: solid;margin:20px -20px 10px -20px;padding:3px 0px 3px 10px;background:#f2f2f2;">新的 API</h2><p style="line-height:18px;margin:0px 0px 14px;">PyQt 4.5 引入了新的 API 用于信号和槽。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span>QtCore</span><span style="color:#666666;">.</span><span>QObject</span><span style="color:#666666;">.</span><span>connect</span><span>(</span><span>button</span><span>,</span> <span>QtCore</span><span style="color:#666666;">.</span><span>SIGNAL</span><span>(</span><span style="color:#4070a0;">'clicked()'</span><span>),</span> <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>onClicked</span><span>)</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">这是旧式的 API 。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span>button</span><span style="color:#666666;">.</span><span>clicked</span><span style="color:#666666;">.</span><span>connect</span><span>(</span><span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>onClicked</span><span>)</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">新式的更接近 Python 的标准。</p></div><div><h2 style="font-size:14px;font-weight:normal;color:#20435c;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #cccccc #ffffff;border-style: solid;margin:20px -20px 10px -20px;padding:3px 0px 3px 10px;background:#f2f2f2;">信号与槽</h2><p style="line-height:18px;margin:0px 0px 14px;">这是一个简单的例子，描述 PyQt4 中的信号和槽。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span style="color:#408090;">#!/usr/bin/python</span>
<span style="color:#408090;"># -*- coding: utf-8 -*-</span>
<span style="color:#4070a0;">"""</span>
<span style="color:#4070a0;">ZetCode PyQt4 tutorial</span>
<span style="color:#4070a0;">In this example, we connect a signal</span>
<span style="color:#4070a0;">of a QtGui.QSlider to a slot</span>
<span style="color:#4070a0;">of a QtGui.QLCDNumber.</span>
<span style="color:#4070a0;">author: Jan Bodnar</span>
<span style="color:#4070a0;">website: zetcode.com</span>
<span style="color:#4070a0;">last edited: October 2011</span>
<span style="color:#4070a0;">"""</span>
<span style="font-weight:bold;color:#007020;">import</span> <span style="font-weight:bold;color:#0e84b5;">sys</span>
<span style="font-weight:bold;color:#007020;">from</span> <span style="font-weight:bold;color:#0e84b5;">PyQt4</span> <span style="font-weight:bold;color:#007020;">import</span> <span>QtGui</span><span>,</span> <span>QtCore</span>
<span style="font-weight:bold;color:#007020;">class</span> <span style="font-weight:bold;color:#0e84b5;">Example</span><span>(</span><span>QtGui</span><span style="color:#666666;">.</span><span>QWidget</span><span>):</span>
    <span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">__init__</span><span>(</span><span style="color:#007020;">self</span><span>):</span>
        <span style="color:#007020;">super</span><span>(</span><span>Example</span><span>,</span> <span style="color:#007020;">self</span><span>)</span><span style="color:#666666;">.</span><span>__init__</span><span>()</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>initUI</span><span>()</span>
    <span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">initUI</span><span>(</span><span style="color:#007020;">self</span><span>):</span>
        <span>lcd</span> <span style="color:#666666;">=</span> <span>QtGui</span><span style="color:#666666;">.</span><span>QLCDNumber</span><span>(</span><span style="color:#007020;">self</span><span>)</span>
        <span>sld</span> <span style="color:#666666;">=</span> <span>QtGui</span><span style="color:#666666;">.</span><span>QSlider</span><span>(</span><span>QtCore</span><span style="color:#666666;">.</span><span>Qt</span><span style="color:#666666;">.</span><span>Horizontal</span><span>,</span> <span style="color:#007020;">self</span><span>)</span>
        <span>vbox</span> <span style="color:#666666;">=</span> <span>QtGui</span><span style="color:#666666;">.</span><span>QVBoxLayout</span><span>()</span>
        <span>vbox</span><span style="color:#666666;">.</span><span>addWidget</span><span>(</span><span>lcd</span><span>)</span>
        <span>vbox</span><span style="color:#666666;">.</span><span>addWidget</span><span>(</span><span>sld</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>setLayout</span><span>(</span><span>vbox</span><span>)</span>
        <span>sld</span><span style="color:#666666;">.</span><span>valueChanged</span><span style="color:#666666;">.</span><span>connect</span><span>(</span><span>lcd</span><span style="color:#666666;">.</span><span>display</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>setGeometry</span><span>(</span><span style="color:#208050;">300</span><span>,</span> <span style="color:#208050;">300</span><span>,</span> <span style="color:#208050;">250</span><span>,</span> <span style="color:#208050;">150</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>setWindowTitle</span><span>(</span><span style="color:#4070a0;">'Signal &amp; slot'</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>show</span><span>()</span>
<span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">main</span><span>():</span>
    <span>app</span> <span style="color:#666666;">=</span> <span>QtGui</span><span style="color:#666666;">.</span><span>QApplication</span><span>(</span><span>sys</span><span style="color:#666666;">.</span><span>argv</span><span>)</span>
    <span>ex</span> <span style="color:#666666;">=</span> <span>Example</span><span>()</span>
    <span>sys</span><span style="color:#666666;">.</span><span>exit</span><span>(</span><span>app</span><span style="color:#666666;">.</span><span>exec_</span><span>())</span>
<span style="font-weight:bold;color:#007020;">if</span> <span>__name__</span> <span style="color:#666666;">==</span> <span style="color:#4070a0;">'__main__'</span><span>:</span>
    <span>main</span><span>()</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">在我们的例子中，我们显示了 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>QtGui.QLCDNumber</span></tt>和 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>QtGui.QSlider</span></tt>。通过拖拽滑块，我们就可以更改 lcd 的数字。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span>sld</span><span style="color:#666666;">.</span><span>valueChanged</span><span style="color:#666666;">.</span><span>connect</span><span>(</span><span>lcd</span><span style="color:#666666;">.</span><span>display</span><span>)</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">此处，我们把 slider 的信号 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>valueChanged</span></tt>和 lcd 的槽 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>display</span></tt>连接了起来。</p><p style="line-height:18px;margin:0px 0px 14px;"><strong style="font-weight:bold;">sender</strong>是发送信号的对象。 <strong style="font-weight:bold;">receiver</strong>是接受信号的对象。而 <strong style="font-weight:bold;">slot</strong>是回馈信号的方法。</p></div><div><h2 style="font-size:14px;font-weight:normal;color:#20435c;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #cccccc #ffffff;border-style: solid;margin:20px -20px 10px -20px;padding:3px 0px 3px 10px;background:#f2f2f2;">重新实现事件处理句柄</h2><p style="line-height:18px;margin:0px 0px 14px;">在 PyQt4 中事件的处理一般通过重新实现事件的句柄。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span style="color:#408090;">#!/usr/bin/python</span>
<span style="color:#408090;"># -*- coding: utf-8 -*-</span>
<span style="color:#4070a0;">"""</span>
<span style="color:#4070a0;">ZetCode PyQt4 tutorial</span>
<span style="color:#4070a0;">In this example, we reimplement an</span>
<span style="color:#4070a0;">event handler.</span>
<span style="color:#4070a0;">author: Jan Bodnar</span>
<span style="color:#4070a0;">website: zetcode.com</span>
<span style="color:#4070a0;">last edited: October 2011</span>
<span style="color:#4070a0;">"""</span>
<span style="font-weight:bold;color:#007020;">import</span> <span style="font-weight:bold;color:#0e84b5;">sys</span>
<span style="font-weight:bold;color:#007020;">from</span> <span style="font-weight:bold;color:#0e84b5;">PyQt4</span> <span style="font-weight:bold;color:#007020;">import</span> <span>QtGui</span><span>,</span> <span>QtCore</span>
<span style="font-weight:bold;color:#007020;">class</span> <span style="font-weight:bold;color:#0e84b5;">Example</span><span>(</span><span>QtGui</span><span style="color:#666666;">.</span><span>QWidget</span><span>):</span>
    <span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">__init__</span><span>(</span><span style="color:#007020;">self</span><span>):</span>
        <span style="color:#007020;">super</span><span>(</span><span>Example</span><span>,</span> <span style="color:#007020;">self</span><span>)</span><span style="color:#666666;">.</span><span>__init__</span><span>()</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>initUI</span><span>()</span>
    <span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">initUI</span><span>(</span><span style="color:#007020;">self</span><span>):</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>setGeometry</span><span>(</span><span style="color:#208050;">300</span><span>,</span> <span style="color:#208050;">300</span><span>,</span> <span style="color:#208050;">250</span><span>,</span> <span style="color:#208050;">150</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>setWindowTitle</span><span>(</span><span style="color:#4070a0;">'Event handler'</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>show</span><span>()</span>
    <span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">keyPressEvent</span><span>(</span><span style="color:#007020;">self</span><span>,</span> <span>e</span><span>):</span>
        <span style="font-weight:bold;color:#007020;">if</span> <span>e</span><span style="color:#666666;">.</span><span>key</span><span>()</span> <span style="color:#666666;">==</span> <span>QtCore</span><span style="color:#666666;">.</span><span>Qt</span><span style="color:#666666;">.</span><span>Key_Escape</span><span>:</span>
            <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>close</span><span>()</span>
<span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">main</span><span>():</span>
    <span>app</span> <span style="color:#666666;">=</span> <span>QtGui</span><span style="color:#666666;">.</span><span>QApplication</span><span>(</span><span>sys</span><span style="color:#666666;">.</span><span>argv</span><span>)</span>
    <span>ex</span> <span style="color:#666666;">=</span> <span>Example</span><span>()</span>
    <span>sys</span><span style="color:#666666;">.</span><span>exit</span><span>(</span><span>app</span><span style="color:#666666;">.</span><span>exec_</span><span>())</span>
<span style="font-weight:bold;color:#007020;">if</span> <span>__name__</span> <span style="color:#666666;">==</span> <span style="color:#4070a0;">'__main__'</span><span>:</span>
    <span>main</span><span>()</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">在我们的例子中，我们重新实现了 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>keyPressEvent()</span></tt>。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">keyPressEvent</span><span>(</span><span style="color:#007020;">self</span><span>,</span> <span>e</span><span>):</span>
    <span style="font-weight:bold;color:#007020;">if</span> <span>e</span><span style="color:#666666;">.</span><span>key</span><span>()</span> <span style="color:#666666;">==</span> <span>QtCore</span><span style="color:#666666;">.</span><span>Qt</span><span style="color:#666666;">.</span><span>Key_Escape</span><span>:</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>close</span><span>()</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">如果我们按 escape 键，那么应用就将终止。</p></div><div><h2 style="font-size:14px;font-weight:normal;color:#20435c;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #cccccc #ffffff;border-style: solid;margin:20px -20px 10px -20px;padding:3px 0px 3px 10px;background:#f2f2f2;">事件发送者</h2><p style="line-height:18px;margin:0px 0px 14px;">有些时候，知道信号的发送者是很方便的。因此，PyQt4 有个 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>sender()</span></tt>方法。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span style="color:#408090;">#!/usr/bin/python</span>
<span style="color:#408090;"># -*- coding: utf-8 -*-</span>
<span style="color:#4070a0;">"""</span>
<span style="color:#4070a0;">ZetCode PyQt4 tutorial</span>
<span style="color:#4070a0;">In this example, we determine the event sender</span>
<span style="color:#4070a0;">object.</span>
<span style="color:#4070a0;">author: Jan Bodnar</span>
<span style="color:#4070a0;">website: zetcode.com</span>
<span style="color:#4070a0;">last edited: October 2011</span>
<span style="color:#4070a0;">"""</span>
<span style="font-weight:bold;color:#007020;">import</span> <span style="font-weight:bold;color:#0e84b5;">sys</span>
<span style="font-weight:bold;color:#007020;">from</span> <span style="font-weight:bold;color:#0e84b5;">PyQt4</span> <span style="font-weight:bold;color:#007020;">import</span> <span>QtGui</span><span>,</span> <span>QtCore</span>
<span style="font-weight:bold;color:#007020;">class</span> <span style="font-weight:bold;color:#0e84b5;">Example</span><span>(</span><span>QtGui</span><span style="color:#666666;">.</span><span>QMainWindow</span><span>):</span>
    <span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">__init__</span><span>(</span><span style="color:#007020;">self</span><span>):</span>
        <span style="color:#007020;">super</span><span>(</span><span>Example</span><span>,</span> <span style="color:#007020;">self</span><span>)</span><span style="color:#666666;">.</span><span>__init__</span><span>()</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>initUI</span><span>()</span>
    <span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">initUI</span><span>(</span><span style="color:#007020;">self</span><span>):</span>
        <span>btn1</span> <span style="color:#666666;">=</span> <span>QtGui</span><span style="color:#666666;">.</span><span>QPushButton</span><span>(</span><span style="color:#4070a0;">"Button 1"</span><span>,</span> <span style="color:#007020;">self</span><span>)</span>
        <span>btn1</span><span style="color:#666666;">.</span><span>move</span><span>(</span><span style="color:#208050;">30</span><span>,</span> <span style="color:#208050;">50</span><span>)</span>
        <span>btn2</span> <span style="color:#666666;">=</span> <span>QtGui</span><span style="color:#666666;">.</span><span>QPushButton</span><span>(</span><span style="color:#4070a0;">"Button 2"</span><span>,</span> <span style="color:#007020;">self</span><span>)</span>
        <span>btn2</span><span style="color:#666666;">.</span><span>move</span><span>(</span><span style="color:#208050;">150</span><span>,</span> <span style="color:#208050;">50</span><span>)</span>
        <span>btn1</span><span style="color:#666666;">.</span><span>clicked</span><span style="color:#666666;">.</span><span>connect</span><span>(</span><span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>buttonClicked</span><span>)</span>
        <span>btn2</span><span style="color:#666666;">.</span><span>clicked</span><span style="color:#666666;">.</span><span>connect</span><span>(</span><span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>buttonClicked</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>statusBar</span><span>()</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>setGeometry</span><span>(</span><span style="color:#208050;">300</span><span>,</span> <span style="color:#208050;">300</span><span>,</span> <span style="color:#208050;">290</span><span>,</span> <span style="color:#208050;">150</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>setWindowTitle</span><span>(</span><span style="color:#4070a0;">'Event sender'</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>show</span><span>()</span>
    <span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">buttonClicked</span><span>(</span><span style="color:#007020;">self</span><span>):</span>
        <span>sender</span> <span style="color:#666666;">=</span> <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>sender</span><span>()</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>statusBar</span><span>()</span><span style="color:#666666;">.</span><span>showMessage</span><span>(</span><span>sender</span><span style="color:#666666;">.</span><span>text</span><span>()</span> <span style="color:#666666;">+</span> <span style="color:#4070a0;">' was pressed'</span><span>)</span>
<span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">main</span><span>():</span>
    <span>app</span> <span style="color:#666666;">=</span> <span>QtGui</span><span style="color:#666666;">.</span><span>QApplication</span><span>(</span><span>sys</span><span style="color:#666666;">.</span><span>argv</span><span>)</span>
    <span>ex</span> <span style="color:#666666;">=</span> <span>Example</span><span>()</span>
    <span>sys</span><span style="color:#666666;">.</span><span>exit</span><span>(</span><span>app</span><span style="color:#666666;">.</span><span>exec_</span><span>())</span>
<span style="font-weight:bold;color:#007020;">if</span> <span>__name__</span> <span style="color:#666666;">==</span> <span style="color:#4070a0;">'__main__'</span><span>:</span>
    <span>main</span><span>()</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">这个例子中有两个按钮。在 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>buttonClicked()</span></tt>方法中，我们通过调用 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>sender()</span></tt>方法知道了哪个按钮被点击了。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span>btn1</span><span style="color:#666666;">.</span><span>clicked</span><span style="color:#666666;">.</span><span>connect</span><span>(</span><span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>buttonClicked</span><span>)</span>
<span>btn2</span><span style="color:#666666;">.</span><span>clicked</span><span style="color:#666666;">.</span><span>connect</span><span>(</span><span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>buttonClicked</span><span>)</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">两个按钮都连接到相同的槽中。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">buttonClicked</span><span>(</span><span style="color:#007020;">self</span><span>):</span>
    <span>sender</span> <span style="color:#666666;">=</span> <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>sender</span><span>()</span>
    <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>statusBar</span><span>()</span><span style="color:#666666;">.</span><span>showMessange</span><span>(</span><span>sender</span><span style="color:#666666;">.</span><span>text</span><span>()</span> <span style="color:#666666;">+</span> <span style="color:#4070a0;">" was pressed"</span><span>)</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">我们通过调用 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>sender()</span></tt>方法知道了消息源。在状态栏中，我们显示了被按的按钮的标签。</p></div><div><h2 style="font-size:14px;font-weight:normal;color:#20435c;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #cccccc #ffffff;border-style: solid;margin:20px -20px 10px -20px;padding:3px 0px 3px 10px;background:#f2f2f2;">发送信号</h2><p style="line-height:18px;margin:0px 0px 14px;">由 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>QtCore.QObject</span></tt>创建的对象可以发送信号。如果我们点击按钮，一个 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>clicked()</span></tt>信号就被生成。在下面的例子中我们将看到如何发送信号。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span style="color:#408090;">#!/usr/bin/python</span>
<span style="color:#408090;"># -*- coding: utf-8 -*-</span>
<span style="color:#4070a0;">"""</span>
<span style="color:#4070a0;">ZetCode PyQt4 tutorial</span>
<span style="color:#4070a0;">In this example, we show how to emit a</span>
<span style="color:#4070a0;">custom signal.</span>
<span style="color:#4070a0;">author: Jan Bodnar</span>
<span style="color:#4070a0;">website: zetcode.com</span>
<span style="color:#4070a0;">last edited: October 2011</span>
<span style="color:#4070a0;">"""</span>
<span style="font-weight:bold;color:#007020;">import</span> <span style="font-weight:bold;color:#0e84b5;">sys</span>
<span style="font-weight:bold;color:#007020;">from</span> <span style="font-weight:bold;color:#0e84b5;">PyQt4</span> <span style="font-weight:bold;color:#007020;">import</span> <span>QtGui</span><span>,</span> <span>QtCore</span>
<span style="font-weight:bold;color:#007020;">class</span> <span style="font-weight:bold;color:#0e84b5;">Communicate</span><span>(</span><span>QtCore</span><span style="color:#666666;">.</span><span>QObject</span><span>):</span>
    <span>closeApp</span> <span style="color:#666666;">=</span> <span>QtCore</span><span style="color:#666666;">.</span><span>pyqtSignal</span><span>()</span>
<span style="font-weight:bold;color:#007020;">class</span> <span style="font-weight:bold;color:#0e84b5;">Example</span><span>(</span><span>QtGui</span><span style="color:#666666;">.</span><span>QMainWindow</span><span>):</span>
    <span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">__init__</span><span>(</span><span style="color:#007020;">self</span><span>):</span>
        <span style="color:#007020;">super</span><span>(</span><span>Example</span><span>,</span> <span style="color:#007020;">self</span><span>)</span><span style="color:#666666;">.</span><span>__init__</span><span>()</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>initUI</span><span>()</span>
    <span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">initUI</span><span>(</span><span style="color:#007020;">self</span><span>):</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>c</span> <span style="color:#666666;">=</span> <span>Communicate</span><span>()</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>c</span><span style="color:#666666;">.</span><span>closeApp</span><span style="color:#666666;">.</span><span>connect</span><span>(</span><span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>close</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>setGeometry</span><span>(</span><span style="color:#208050;">300</span><span>,</span> <span style="color:#208050;">300</span><span>,</span> <span style="color:#208050;">290</span><span>,</span> <span style="color:#208050;">150</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>setWindowTitle</span><span>(</span><span style="color:#4070a0;">'Emit signal'</span><span>)</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>show</span><span>()</span>
    <span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">mousePressEvent</span><span>(</span><span style="color:#007020;">self</span><span>,</span> <span>event</span><span>):</span>
        <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>c</span><span style="color:#666666;">.</span><span>closeApp</span><span style="color:#666666;">.</span><span>emit</span><span>()</span>
<span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">main</span><span>():</span>
    <span>app</span> <span style="color:#666666;">=</span> <span>QtGui</span><span style="color:#666666;">.</span><span>QApplication</span><span>(</span><span>sys</span><span style="color:#666666;">.</span><span>argv</span><span>)</span>
    <span>ex</span> <span style="color:#666666;">=</span> <span>Example</span><span>()</span>
    <span>sys</span><span style="color:#666666;">.</span><span>exit</span><span>(</span><span>app</span><span style="color:#666666;">.</span><span>exec_</span><span>())</span>
<span style="font-weight:bold;color:#007020;">if</span> <span>__name__</span> <span style="color:#666666;">==</span> <span style="color:#4070a0;">'__main__'</span><span>:</span>
    <span>main</span><span>()</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">我们创建了一个新的信号称为 closeApp 。这个信号在鼠标点击时将被发送。而这个信号又和 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>QtGui.QMainWindow</span></tt>的 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>close()</span></tt>槽相连接。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span style="font-weight:bold;color:#007020;">class</span> <span style="font-weight:bold;color:#0e84b5;">Communicate</span><span>(</span><span>QtCore</span><span style="color:#666666;">.</span><span>QObject</span><span>):</span>
    <span>closeApp</span> <span style="color:#666666;">=</span> <span>QtCore</span><span style="color:#666666;">.</span><span>pyqtSignal</span><span>()</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">我们创建了基于 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>QtCore.QObject</span></tt>的类。当它被实例化后就创建了一个 closeApp 信号。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>c</span> <span style="color:#666666;">=</span> <span>Communicate</span><span>()</span>
<span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>c</span><span style="color:#666666;">.</span><span>closeApp</span><span style="color:#666666;">.</span><span>connect</span><span>(</span><span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>close</span><span>)</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">类 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>Communicate</span></tt>的实例就被创建了。我们把 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>QtGui.QMainWindow</span></tt>的 <tt style="font-size:13px;padding:0px 1px;background:#ecf0f3;"><span>close()</span></tt>槽连接到信号 closeApp 上。</p><div><div style="background:#eeffcc;"><pre style="display:block;overflow:hidden;color:#333333;line-height:16px;white-space:pre;border-width: 1px 0px 1px 0px;border-color: #aacc99 #ffffff #aacc99 #ffffff;border-style: solid;padding:5px;background:#eeffcc;"><span style="font-weight:bold;color:#007020;">def</span> <span style="color:#06287e;">mousePressEvent</span><span>(</span><span style="color:#007020;">self</span><span>,</span> <span>event</span><span>):</span>
    <span style="color:#007020;">self</span><span style="color:#666666;">.</span><span>c</span><span style="color:#666666;">.</span><span>closeApp</span><span style="color:#666666;">.</span><span>emit</span><span>()</span>
</pre></div></div><p style="line-height:18px;margin:0px 0px 14px;">当鼠标指针在窗口中点击，信号 closeApp 就被发送了。</p><hr style="display:block;height:2px;font-size:0px;color:#808080;border:1px solid #808080;margin:7px 0px;"><p style="line-height:18px;margin:0px 0px 14px;">在这个部分，我们涉及了信号与槽。</p></div></div></div></div></div></div><p style="color:#aaaaaa;border-width: 1px 0px 0px 0px;border-color: #dddddd #ffffff #ffffff #ffffff;border-style: solid;margin:14px 0px 0px;">posted on 2012-02-05 10:05 <a style="color:#1d58d1;" href="http://www.cppblog.com/mirguest/">mirguest</a>阅读(5918) <a style="color:#1d58d1;" href="164984.html#Post">评论(0)</a> <a style="color:#1d58d1;" href="http://www.cppblog.com/mirguest/admin/EditPosts.aspx?postid=164984">编辑</a> <a style="color:#1d58d1;" href="http://www.cppblog.com/mirguest/AddToFavorite.aspx?id=164984">收藏</a><a style="color:#1d58d1;" href="http://www.cppblog.com/mirguest/services/trackbacks/164984.aspx">引用</a>所属分类: <a style="color:#1d58d1;" href="http://www.cppblog.com/mirguest/category/15952.html">Python</a></p></div><img style="width:1px;height:1px;" src="164984.html_webv"><div><div></div><div><span style="color:#ff0000;"></span><br><a style="color:#355f7c;" href="164984.html" name="Feedback"></a><table style="display:table;font-size:16px;text-indent:0px;" cellpadding="1" cellspacing="1"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;" colspan="3"></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;" colspan="3"></td></tr><tr style="display:table-row;"><td style="display:table-cell;width:75px;font-size:12px;padding:1px;"></td><td style="display:table-cell;font-size:12px;padding:1px;"></td><td style="display:table-cell;font-size:12px;padding:1px;"></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;"></td><td style="display:table-cell;font-size:12px;padding:1px;" colspan="2"><a style="color:#355f7c;" href="http://job.cnblogs.com/">找优秀程序员，就在博客园</a></td></tr><tr style="display:table-row;"><td style="display:table-cell;width:55px;font-size:12px;padding:1px;">标题</td><td style="display:table-cell;font-size:12px;padding:1px;"><input style="width:320px;font-size:14px;font-weight:bold;color:#000000;border:1px solid #;padding:1px 0px;" name="AjaxHolder$PostComment$tbTitle" type="text" value="re: [Python][PyQt4]PyQt4 中的事件和信号" id="538"></td><td style="display:table-cell;font-size:12px;padding:1px;"></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;">姓名</td><td style="display:table-cell;font-size:12px;padding:1px;"><input style="width:320px;font-size:14px;font-weight:bold;color:#000000;border:1px solid #;padding:1px 0px;" name="AjaxHolder$PostComment$tbName" type="text" id="539"></td><td style="display:table-cell;font-size:12px;padding:1px;"></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;">主页</td><td style="display:table-cell;font-size:12px;padding:1px;"><input style="width:320px;font-size:14px;font-weight:bold;color:#000000;border:1px solid #;padding:1px 0px;" name="AjaxHolder$PostComment$tbUrl" type="text" id="540"></td><td style="display:table-cell;font-size:12px;padding:1px;"><font></font></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;text-align:left;padding:1px;" align="left" colspan="3"><table style="display:table;font-size:16px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;" colspan="3"><span style="font-weight:bold;color:#ff0000;"></span></td></tr><tr style="display:table-row;"><td style="display:table-cell;width:78px;font-size:12px;">验证码</td><td style="display:table-cell;font-size:12px;"><input style="font-size:14px;font-weight:bold;color:#000000;border:1px solid #;padding:1px 0px;" name="AjaxHolder$PostComment$CodeNumberTextBox" type="text" id="541">*</td><td style="display:table-cell;font-size:12px;text-align:left;" align="left"><img src="JpegImage.aspx"></td></tr></tbody></table></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;" colspan="3">内容(提交失败后,可以通过“恢复上次提交”恢复刚刚提交的内容) <br><textarea style="width:480px;height:220px;font-size:13px;color:#000000;border:1px solid #;margin:1px 0px;" name="AjaxHolder$PostComment$tbComment" id="542"></textarea></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;" colspan="3"><span style="color:#ff0000;"></span></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;" colspan="3"><input style="width:13px;height:13px;font-size:14px;font-weight:bold;color:#000000;border:1px solid #;margin:3px 3px 3px 4px;" checked="" name="AjaxHolder$PostComment$chkRemember" type="checkbox" id="543"><label>Remember Me?</label></td></tr><tr style="display:table-row;"><td style="display:table-cell;height:23px;font-size:12px;padding:1px;"><input style="font-size:14px;font-weight:bold;color:#000000;text-align:center;white-space:pre;border:1px solid #;padding:0px 6px;background:#38fa83;" name="AjaxHolder$PostComment$btnSubmit" onclick="document.location.reload();" type="submit" value="提交" id="544"></td><td style="display:table-cell;height:23px;font-size:12px;padding:1px;" colspan="2">  <a style="color:#355f7c;" href="http://www.cppblog.com/login.aspx?ReturnURL=164984.html&amp;SourceURL=/mirguest/archive/2012/02/05/164984.html">登录</a>  <a style="color:#355f7c;" href="http://www.cppblog.com/mirguest/archive/2012/02/05/164984.html?login=1#Post" onclick="document.location.href=this.href;return false;" id="545">使用高级评论</a>  <a style="color:#355f7c;" href="http://www.cppblog.com/RequireRegister.aspx">新用户注册</a>  <a style="color:#355f7c;" href="164984.html#Top">返回页首</a>  <a style="color:#355f7c;" href="164984.html#Post" onclick="document.location.href=this.href;return false;" id="546">恢复上次提交</a>       </td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;" colspan="3">[使用Ctrl+Enter键可以直接提交]</td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;line-height:30px;padding:1px;" colspan="3"><a style="color:#355f7c;" href="http://www.ucancode.com/index.htm">【推荐】超50万行VC++源码: 大型组态工控、电力仿真CAD与GIS源码库</a><br><div style="width:300px;height:250px;"><div style="display:inline-block;width:300px;height:250px;"></div></div></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;" colspan="3"></td></tr><tr style="display:table-row;"><td style="display:table-cell;height:5px;font-size:12px;padding:1px;" colspan="3"><div>相关文章: <ul style="line-height:21px;margin:0px 0px 12px;padding:0px 0px 0px 12px;"><li style="list-style-type:none;"><a style="color:#355f7c;" href="http://www.cppblog.com/mirguest/archive/2012/02/12/165392.html">[Python][PyQt4]PyQt4 中的俄罗斯方块</a></li><li style="list-style-type:none;"><a style="color:#355f7c;" href="http://www.cppblog.com/mirguest/archive/2012/02/12/165391.html">[Python][PyQt4]在 PyQt4 中定制组件</a></li><li style="list-style-type:none;"><a style="color:#355f7c;" href="http://www.cppblog.com/mirguest/archive/2012/02/12/165390.html">[Python][PyQt4]在 PyQt4 中绘图</a></li><li style="list-style-type:none;"><a style="color:#355f7c;" href="http://www.cppblog.com/mirguest/archive/2012/02/12/165389.html">[Python][PyQt4]在 PyQt4 中 drag 和 drop</a></li><li style="list-style-type:none;"><a style="color:#355f7c;" href="http://www.cppblog.com/mirguest/archive/2012/02/12/165388.html">[Python][PyQt4]PyQt4 Widget II</a></li><li style="list-style-type:none;"><a style="color:#355f7c;" href="http://www.cppblog.com/mirguest/archive/2012/02/12/165387.html">[Python][PyQt4]PyQt4 Widget</a></li><li style="list-style-type:none;"><a style="color:#355f7c;" href="http://www.cppblog.com/mirguest/archive/2012/02/12/165386.html">[Python][PyQt4]PyQt4 中的 Dialog</a></li><li style="list-style-type:none;"><a style="color:#355f7c;" href="http://www.cppblog.com/mirguest/archive/2012/02/05/164983.html">[Python][PyQt4]PyQt4的 layout 管理</a></li><li style="list-style-type:none;"><a style="color:#355f7c;" href="http://www.cppblog.com/mirguest/archive/2012/02/05/164982.html">[Python][PyQt4]在 PyQt4 中的菜单和工具栏</a></li></ul></div></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;" colspan="3"></td></tr><tr style="display:table-row;"><td style="display:table-cell;height:1px;font-size:12px;padding:1px;" colspan="3"><div>网站导航: <a style="color:#355f7c;" href="http://www.cnblogs.com/">博客园</a>   <a style="color:#355f7c;" href="http://news.cnblogs.com/">IT新闻</a>   <a style="color:#355f7c;" href="http://www.blogjava.net/">BlogJava</a>   <a style="color:#355f7c;" href="http://kb.cnblogs.com/">知识库</a>   <a style="color:#355f7c;" href="http://job.cnblogs.com/">程序员招聘</a>   <a style="color:#355f7c;" href="http://www.cppblog.com/mirguest/archive/2012/02/05/164984.html?opt=admin">管理</a></div></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;padding:1px;" colspan="3"><br></td></tr></tbody></table></div></div></div></div></td></tr><tr style="display:table-row;"><td style="display:table-cell;font-size:12px;"><p style="font-size:14px;text-align:center;padding:5px 0px 0px;">Powered by: <br><a style="font-size:12px;color:#355f7c;" href="http://www.cppblog.com/" name="Hyperlink1">C++博客</a><br>Copyright © mirguest </p></td></tr></tbody></table></form></body></html>
