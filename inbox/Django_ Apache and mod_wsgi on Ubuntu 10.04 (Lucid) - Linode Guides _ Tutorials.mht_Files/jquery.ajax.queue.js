// Copyright (c) 2012 Foliotek Inc.
!function(e){var t={};e.ajaxq=function(a,n){function s(e){t[a]?t[a].push(e):(t[a]=[],e())}function r(){if(t[a]){var e=t[a].shift();e?e():delete t[a]}}if("undefined"==typeof n)throw"AjaxQ: queue name is not provided";var i=e.Deferred(),o=i.promise();o.success=o.done,o.error=o.fail,o.complete=o.always;var c=e.extend(!0,{},n);return s(function(){var t=e.ajax.apply(window,[c]).always(r);t.done(function(){i.resolve.apply(this,arguments)}),t.fail(function(){i.reject.apply(this,arguments)})}),o},e.each(["getq","postq"],function(t,a){e[a]=function(t,n,s,r,i){return e.isFunction(s)&&(i=i||r,r=s,s=void 0),e.ajaxq(t,{type:"postq"===a?"post":"get",url:n,data:s,success:r,dataType:i})}});var a=function(e){return t.hasOwnProperty(e)},n=function(){for(var e in t)if(a(e))return!0;return!1};e.ajaxq.isRunning=function(e){return e?a(e):n()},e.ajaxq.clear=function(e){if(e)t[e]&&delete t[e];else for(var a in t)t.hasOwnProperty(a)&&delete t[a]}}(jQuery);
