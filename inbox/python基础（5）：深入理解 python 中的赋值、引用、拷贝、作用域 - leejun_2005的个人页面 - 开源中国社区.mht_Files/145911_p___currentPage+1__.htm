<html><head><meta charset="UTF-8">

<meta http-equiv="Content-Type"><title>python基础（5）：深入理解 python 中的赋值、引用、拷贝、作用域 - leejun_2005的个人页面 - 开源中国社区</title></head><body style="font-size:13px;text-align:center;background:#f9f9f9;"><div style="width:98%;text-align:left;margin:0px 0px 50px;padding:0px 4px;"><div style="height:30px;margin:0px 0px 5px;padding:2px 5px 0px 5px;background:#40aa53;"><div style="height:30px;float:left;margin:0px 0px 0px 10px;"><ul style="line-height:18px;list-style-type:none;"><li style="float:left;line-height:30px;list-style-type:none;margin:0px 16px 0px;"><a style="color:#ffffff;" href="http://www.oschina.net/">首页</a></li><li style="display:block;height:25px;float:left;line-height:30px;margin:0px 16px 0px;padding:0px 8px 0px;"><a style="color:#ffffff;" href="http://www.oschina.net/project">开源项目</a></li><li style="display:block;height:25px;float:left;line-height:30px;margin:0px 16px 0px;padding:0px 8px 0px;"><a style="color:#ffffff;" href="http://www.oschina.net/question">问答</a></li><li style="float:left;line-height:30px;list-style-type:none;margin:0px 16px 0px;"><a style="color:#ffffff;" href="http://www.oschina.net/code/list">代码</a></li><li style="float:left;line-height:30px;list-style-type:none;margin:0px 16px 0px;"><a style="color:#ffffff;" href="http://www.oschina.net/blog">博客</a></li><li style="float:left;line-height:30px;list-style-type:none;margin:0px 16px 0px;"><a style="color:#ffffff;" href="http://www.oschina.net/translate">翻译</a></li><li style="float:left;line-height:30px;list-style-type:none;margin:0px 16px 0px;"><a style="color:#ffffff;" href="http://www.oschina.net/news">资讯</a></li><li style="display:block;height:25px;float:left;line-height:30px;margin:0px 16px 0px;padding:0px 8px 0px;"><a style="color:#ffffff;" href="http://www.oschina.net/android">移动开发</a></li><li style="float:left;line-height:30px;list-style-type:none;margin:0px 16px 0px;"><a style="color:#ffffff;" href="http://www.oschina.net/job">招聘</a></li><li style="display:block;height:25px;float:left;line-height:30px;margin:0px 16px 0px;padding:0px 8px 0px;"><a style="color:#ffffff;" href="http://city.oschina.net/">城市圈</a></li></ul></div><div style="float:right;color:#dddddd;line-height:30px;margin:0px 10px 0px;">当前访客身份：游客 [ <a style="color:#ffffff;" href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fmy.oschina.net%2Fleejun2005%2Fblog%2F145911">登录</a>| <a style="color:#ffffff;" href="http://www.oschina.net/home/reg">加入开源中国</a>] </div><div style="font-size:1px;clear:both;"></div></div><div style="margin:2px 0px;"><div style="float:left;font-size:12px;color:#888888;">当前访客身份： 游客 [ <a style="color:#4466bb;" href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fmy.oschina.net%2Fleejun2005">登录</a>| <a style="color:#4466bb;" href="http://www.oschina.net/home/reg">加入开源中国</a>] </div><div><form style="width:310px;float:right;font-size:0px;margin:3px 0px 0px;padding:1px;background:#eeeeee;" accept-charset="utf-8" action="http://www.oschina.net/search"><input name="user" type="hidden" value="568818" id="531"><span style="display:block;height:22px;float:left;padding:2px 0px 0px 5px;background:#ffffff;"><input style="width:200px;height:20px;font-size:16px;font-weight:bold;color:#868686;background:;" name="q" type="text" value="" id="532"></span><div style="display:inline-block;font-size:13px;"><div style="text-align:center;background:#ffffff;"><span style="display:block;width:50px;height:24px;color:#868686;line-height:23px;text-align:left;padding:0px 0px 0px 10px;">软件</span></div></div><input style="display:inline-block;width:45px;height:24px;font-size:16px;font-weight:bold;color:#ffffff;text-align:center;white-space:pre;background:#5cc26f;" type="submit" value="搜索" id="533"></form></div><div style="font-size:1px;clear:both;"></div></div><div style="margin:10px 2px;"><div style="width:220px;float:left;"><div style="padding:15px 5px 15px 10px;background:#5cc26f;"><a style="color:#ffffff;" href="http://my.oschina.net/leejun2005"><img style="display:block;width:56px;height:56px;float:left;margin:0px 8px 10px;padding:3px;background:#ffffff;" alt="xrzs" src="568818_100.jpg_t_134.avi"></a><span style="display:block;width:130px;float:left;"><a style="display:block;font-size:18px;font-weight:bold;color:#ffffff;margin:0px 0px 12px;" href="http://my.oschina.net/leejun2005">xrzs</a><span style="font-size:12px;color:#ffffff;"><img src="men.png"><span><a style="color:#ffffff;" onclick="document.location.reload();return false;" href="javascript:_follow_nologin()" id="534">关注此人</a></span></span></span><div style="font-size:1px;clear:both;"></div><div style="font-size:12px;color:#ffffff;"><a style="color:#ffffff;margin:0px 3px 0px;" href="http://my.oschina.net/leejun2005/fellow">关注<span>(2)</span></a><a style="color:#ffffff;margin:0px 3px 0px;" href="http://my.oschina.net/leejun2005/fans">粉丝<span>(758)</span></a><a style="color:#ffffff;margin:0px 3px 0px;" href="http://www.oschina.net/question/3307_20931">积分<span>(350)</span></a></div></div><div style="overflow:hidden;color:#ffffff;margin:3px 0px 0px;padding:18px 10px 18px 40px;background:#7798cb;">1）Writing is thinking. 2）If you're interesting someone won't agree with what you said.</div><div style="margin:3px 0px 0px;"><a style="display:block;width:108px;height:108px;float:left;color:#4466bb;background:#5cc26f;" onclick="document.location.reload();return false;" href="javascript:sendmsg(568818, 0)" id="535"><i style="display:block;width:67px;height:67px;text-indent:-9999px;margin:10px 0px 0px 20px;">.</i><span style="font-size:14px;color:#ffffff;padding:82px 0px 0px 10px;">发送留言</span></a><a style="display:block;width:108px;height:108px;float:left;color:#4466bb;margin:0px 0px 0px 4px;background:#5cc26f;" href="http://www.oschina.net/question/ask?user=568818"><i style="display:block;width:67px;height:67px;text-indent:-9999px;margin:10px 0px 0px 20px;">.</i><span style="font-size:14px;color:#ffffff;padding:82px 0px 0px 10px;">请教问题</span></a></div><div style="overflow:hidden;color:#666666;margin:3px 0px 0px;padding:5px 0px;background:#eaeaea;"><strong style="display:block;font-size:16px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #7798cb #ffffff;border-style: solid;padding:0px 10px 5px 10px;">博客分类</strong><ul style="line-height:24px;list-style-type:none;margin:10px;"><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=185918">java</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(43)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186146">awk/shell</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(24)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186190">javame/android</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(1)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=219093">python</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(52)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=3291169">scala</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(1)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186198">perl</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(2)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186197">oracle</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(4)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186200">sqlite</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(1)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=232693">sql技巧</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(6)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186195">mysql</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(97)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=225117">tcp/ip/http</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(9)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186196">network</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(16)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186189">JavaNet/Multithread</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(5)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186193">linux/unix</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(36)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186202">windows/office</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(5)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186180">php/nginx/apache</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(15)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186191">js/ajax/extjs/jquery</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(13)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186192">jsp/mvc/ssh</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(3)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186186">Django/Flask/WebFW</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(17)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=384549">hive</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(30)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=384557">hbase</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(11)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=384550">pig</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(6)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=539634">spark</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(5)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186187">hadoop</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(39)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186194">NoSQL</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(12)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=533936">hadoop生态圈</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(3)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186179">data analysis theory </a><span style="font-size:10px;margin:0px 0px 0px 5px;">(27)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186178">algorithm</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(7)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=344937">DA/DM/ML</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(12)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=429597">BI/DW</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(3)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=568750">管理之道</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(5)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186203">工作笔记</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(17)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186199">resource</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(0)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=186185">职业 · 杂谈</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(35)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=528824">QA</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(2)</span></li><li style="list-style-type:none;"><a style="color:#333333;padding:0px 0px 0px 15px;" href="http://my.oschina.net/leejun2005/blog?catalog=3337000">金融 · 理财</a><span style="font-size:10px;margin:0px 0px 0px 5px;">(1)</span></li></ul></div><div style="overflow:hidden;color:#666666;margin:3px 0px 0px;padding:5px 0px;background:#eaeaea;"><strong style="display:block;font-size:16px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #7798cb #ffffff;border-style: solid;padding:0px 10px 5px 10px;">阅读排行</strong><ol style="line-height:24px;list-style-type:none;margin:10px;"><li style="list-style-type:none;"><a style="display:block;color:#333333;" href="http://my.oschina.net/leejun2005/blog/109679">1. 关于 python ImportError: No module named 的问题</a></li><li style="list-style-type:none;"><a style="display:block;color:#333333;" href="http://my.oschina.net/leejun2005/blog/104955">2. 循序渐进Java Socket网络编程（多客户端、信息共享、文件传输）</a></li><li style="list-style-type:none;"><a style="display:block;color:#333333;" href="http://my.oschina.net/leejun2005/blog/106789">3. Eclipse 下找不到或无法加载主类的解决办法</a></li><li style="list-style-type:none;"><a style="display:block;color:#333333;" href="http://my.oschina.net/leejun2005/blog/147607">4. storm 原理简介及单机版安装指南</a></li><li style="list-style-type:none;"><a style="display:block;color:#333333;" href="http://my.oschina.net/leejun2005/blog/288136">5. Flume NG 简介及配置实战</a></li><li style="list-style-type:none;"><a style="display:block;color:#333333;" href="http://my.oschina.net/leejun2005/blog/122775">6. 实战 windows7 下 eclipse 远程调试 linux hadoop</a></li><li style="list-style-type:none;"><a style="display:block;color:#333333;" href="http://my.oschina.net/leejun2005/blog/117167">7. 动态规划算法之：最长公共子序列 &amp; 最长公共子串（LCS）</a></li><li style="list-style-type:none;"><a style="display:block;color:#333333;" href="http://my.oschina.net/leejun2005/blog/136820">8. 关于 HTTP GET/POST 请求参数长度最大值的一个理解误区</a></li></ol></div><div style="overflow:hidden;color:#666666;margin:3px 0px 0px;padding:5px 0px;background:#eaeaea;"><strong style="display:block;font-size:16px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #7798cb #ffffff;border-style: solid;padding:0px 10px 5px 10px;">最新评论</strong><ul style="line-height:24px;list-style-type:none;margin:10px;"><li style="list-style-type:none;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #999999 #ffffff;border-style: solid;"><a style="color:#4466bb;" href="http://my.oschina.net/u/2425483">@猪卿</a>：赞一个，做到不易。奔三路过 <a style="color:#4466bb;" href="http://my.oschina.net/action/tweet/go?obj=287631563&amp;type=18&amp;user=2425483">查看»</a></li><li style="list-style-type:none;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #999999 #ffffff;border-style: solid;"><a style="color:#4466bb;" href="http://my.oschina.net/u/1785191">@蓝川逸风</a>：不是很耐用啊，结果不对，比如用qq截图后上传进行... <a style="color:#4466bb;" href="http://my.oschina.net/action/tweet/go?obj=287629819&amp;type=18&amp;user=1785191">查看»</a></li><li style="list-style-type:none;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #999999 #ffffff;border-style: solid;"><a style="color:#4466bb;" href="http://my.oschina.net/colben">@Colben</a>：[79][79][79][79][79][79][79][79][79][79][79][... <a style="color:#4466bb;" href="http://my.oschina.net/action/tweet/go?obj=287566804&amp;type=18&amp;user=2298475">查看»</a></li><li style="list-style-type:none;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #999999 #ffffff;border-style: solid;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005">@xrzs</a>：引用来自“jelly_oy”的评论许多的数据库软件或者... <a style="color:#4466bb;" href="http://my.oschina.net/action/tweet/go?obj=287506610&amp;type=18&amp;user=568818">查看»</a></li><li style="list-style-type:none;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #999999 #ffffff;border-style: solid;"><a style="color:#4466bb;" href="http://my.oschina.net/u/2244906">@jelly_oy</a>：许多的数据库软件或者shell终端都不支持4字节utf... <a style="color:#4466bb;" href="http://my.oschina.net/action/tweet/go?obj=287505372&amp;type=18&amp;user=2244906">查看»</a></li><li style="list-style-type:none;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #999999 #ffffff;border-style: solid;"><a style="color:#4466bb;" href="http://my.oschina.net/u/261246">@铂金蛋蛋</a>：很有干货的一篇文章 <a style="color:#4466bb;" href="http://my.oschina.net/action/tweet/go?obj=287476210&amp;type=18&amp;user=261246">查看»</a></li><li style="list-style-type:none;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #999999 #ffffff;border-style: solid;"><a style="color:#4466bb;" href="http://my.oschina.net/u/922297">@BlueWoods</a>：两种遍历方式效率高低的依据是什么？是否有测试证... <a style="color:#4466bb;" href="http://my.oschina.net/action/tweet/go?obj=287458431&amp;type=18&amp;user=922297">查看»</a></li><li style="list-style-type:none;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #999999 #ffffff;border-style: solid;"><a style="color:#4466bb;" href="http://my.oschina.net/u/1753654">@jianglouis</a>：好东西 <a style="color:#4466bb;" href="http://my.oschina.net/action/tweet/go?obj=287418469&amp;type=18&amp;user=1753654">查看»</a></li><li style="list-style-type:none;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #999999 #ffffff;border-style: solid;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005">@xrzs</a>：引用来自“Kinegratii”的评论写的非常清晰易懂。... <a style="color:#4466bb;" href="http://my.oschina.net/action/tweet/go?obj=287350925&amp;type=18&amp;user=568818">查看»</a></li><li style="list-style-type:none;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #999999 #ffffff;border-style: solid;"><a style="color:#4466bb;" href="http://my.oschina.net/kinegratii">@Kinegratii</a>：写的非常清晰易懂。 第5点 函数参数中，“需要注... <a style="color:#4466bb;" href="http://my.oschina.net/action/tweet/go?obj=287350081&amp;type=18&amp;user=995588">查看»</a></li></ul></div><div style="overflow:hidden;color:#666666;margin:3px 0px 0px;padding:5px 0px;background:#eaeaea;"><strong style="display:block;font-size:16px;font-weight:bold;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #7798cb #ffffff;border-style: solid;padding:0px 10px 5px 10px;">访客统计</strong><ul style="line-height:24px;list-style-type:none;margin:10px;"><li style="list-style-type:none;"><label>今日访问：</label>1368</li><li style="list-style-type:none;"><label>昨日访问：</label>1525</li><li style="list-style-type:none;"><label>本周访问：</label>2893</li><li style="list-style-type:none;"><label>本月访问：</label>3963</li><li style="list-style-type:none;"><label>所有访问：</label>508499</li></ul></div></div><div style="border:1px solid #eeeeee;margin:0px 0px 0px 230px;padding:10px 15px;background:#ffffff;"><div style="height:22px;font-size:12px;color:#999999;line-height:22px;margin:0px 0px 25px;"><div style="float:left;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/home">空间</a>» <a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog">博客</a>» <span style="display:inline-block;"><ul style="width:120px;height:14px;overflow:hidden;clear:left;list-style-type:none;border:1px solid #ffffff;padding:5px;background:#ffffff;"><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=219093">python</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=185918">java</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186146">awk/shell</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186190">javame/android</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=3291169">scala</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186198">perl</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186197">oracle</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186200">sqlite</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=232693">sql技巧</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186195">mysql</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=225117">tcp/ip/http</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186196">network</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186189">JavaNet/Multithread</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186193">linux/unix</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186202">windows/office</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186180">php/nginx/apache</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186191">js/ajax/extjs/jquery</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186192">jsp/mvc/ssh</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186186">Django/Flask/WebFW</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=384549">hive</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=384557">hbase</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=384550">pig</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=539634">spark</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186187">hadoop</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186194">NoSQL</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=533936">hadoop生态圈</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186179">data analysis theory </a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186178">algorithm</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=344937">DA/DM/ML</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=429597">BI/DW</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=568750">管理之道</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186203">工作笔记</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186199">resource</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=186185">职业 · 杂谈</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=528824">QA</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog?catalog=3337000">金融 · 理财</a></li><li style="list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog">所有分类</a></li></ul></span></div></div><div><div style="border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #5cc26f #ffffff;border-style: solid;margin:0px 0px 10px;padding:5px 70px 5px;"><h1 style="font-size:22px;font-weight:normal;margin:0px 0px 10px;"><span style="display:inline-block;width:20px;height:20px;font-size:14px;font-weight:bold;color:#ffffff;text-align:center;background:#44ac57;">原</span>python基础（5）：深入理解 python 中的赋值、引用、拷贝、作用域</h1><div style="font-size:12px;color:#666666;line-height:20px;">发表于2年前(2013-07-21 01:14)   阅读（<span style="color:#40aa53;">6569</span>） | 评论（<a style="color:#aa0000;" href="145911_p___currentPage+1__.htm#comments"><span style="color:#40aa53;">3</span></a>） <span><em style="font-style:normal;font-weight:bold;color:#aa0000;margin:0px 2px;">16</em>人收藏此文章, <span><a style="color:#aa0000;" onclick="document.location.reload();return false;" href="javascript:add_to_favor(145911,3)" id="536">我要收藏</a></span></span></div><div style="width:50px;height:55px;" onclick="document.location.reload();" id="537"><em style="font-style:normal;display:inline-block;width:50px;height:35px;font-size:20px;color:#ffffff;line-height:35px;text-align:center;background:#5cc26f;">赞</em><em style="font-style:normal;display:inline-block;width:50px;height:20px;font-size:12px;color:#ffffff;line-height:20px;text-align:center;background:#5cc26f;">4</em></div></div><p style="margin:0px 0px 10px;"><a style="font-weight:bold;color:#aa0000;" href="http://city.oschina.net/zhuhai/event/244519?channel=text">8月22日珠海 OSC 源创会正在报名，送机械键盘和开源无码内裤</a>  <img src="hot3.png_t_143.png"></p><a style="color:#4466bb;" href="145911_p___currentPage+1__.htm" name="ueditor"></a><div style="line-height:23px;padding:10px;background:#f4f7f9;"><p style="font-size:18px;color:#15a230;"><em style="font-style:normal;display:inline-block;font-size:13px;color:#ffffff;line-height:20px;margin:0px 10px 0px;padding:1px 8px;background:#5cc26f;">目录[-]</em></p><div style="padding:5px 0px;"><li style="font-size:12px;text-indent:50px;list-style-type:none;padding:1px 0px;"><a style="color:#4466bb;" href="145911_p___currentPage+1__.htm#OSC_h3_1">1、先来看个问题吧：</a></li><li style="font-size:12px;text-indent:50px;list-style-type:none;padding:1px 0px;"><a style="color:#4466bb;" href="145911_p___currentPage+1__.htm#OSC_h3_2">2、引用 VS 拷贝：</a></li><li style="font-size:12px;text-indent:50px;list-style-type:none;padding:1px 0px;"><a style="color:#4466bb;" href="145911_p___currentPage+1__.htm#OSC_h3_3">3、增强赋值以及共享引用：</a></li><li style="font-size:12px;text-indent:50px;list-style-type:none;padding:1px 0px;"><a style="color:#4466bb;" href="145911_p___currentPage+1__.htm#OSC_h3_4">4、python 从 2k 到 3k，语句变函数引发的变量作用域问题  </a></li><li style="font-size:12px;text-indent:50px;list-style-type:none;padding:1px 0px;"><a style="color:#4466bb;" href="145911_p___currentPage+1__.htm#OSC_h3_5">5、深入理解 python 变量作用域及其陷阱</a></li><li style="font-size:11px;text-indent:65px;list-style-type:none;padding:1px 0px;"><a style="color:#4466bb;" href="145911_p___currentPage+1__.htm#OSC_h4_6">5.1 可变对象 &amp; 不可变对象</a></li><li style="font-size:11px;text-indent:65px;list-style-type:none;padding:1px 0px;"><a style="color:#4466bb;" href="145911_p___currentPage+1__.htm#OSC_h4_7">5.2 函数值传递</a></li><li style="font-size:11px;text-indent:65px;list-style-type:none;padding:1px 0px;"><a style="color:#4466bb;" href="145911_p___currentPage+1__.htm#OSC_h4_8">5.3 为什么修改全局的dict变量不用global关键字</a></li><li style="font-size:11px;text-indent:65px;list-style-type:none;padding:1px 0px;"><a style="color:#4466bb;" href="145911_p___currentPage+1__.htm#OSC_h4_9">5.4 陷阱：使用可变的默认参数</a></li></div></div><div style="overflow:hidden;font-size:12px;color:#333333;line-height:22px;padding:10px;"><p style="margin:8px 0px;"><span style="font-size:14px;">在 python 中赋值语句总是建立对象的引用值，而不是复制对象。因此，python 变量更像是指针，而不是数据存储区域，</span></p><p style="margin:8px 0px;"><span style="font-size:14px;"><a style="font-size:12px;color:#ff8373;" href="011541_xE4k_568818.jpg.avi"><img style="border:1px solid #dddddd;margin:10px 0px;padding:5px;background:#f4f7f9;" src="011541_xE4k_568818.jpg.avi"></a><br></span></p><p style="margin:8px 0px;"><span style="font-size:14px;">这点和大多数 OO 语言类似吧，比如 C++、java 等 ~</span></p><span></span><h3 style="font-size:16px;font-weight:normal;line-height:28px;margin:15px 0px 10px;"><span style="font-size:14px;background:#ffe500;">1、先来看个问题吧：</span></h3><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://www.zhihu.com/question/21000872">在Python中，令values=[0,1,2];values[1]=values,为何结果是[0,[...],2]?</a></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">&gt;&gt;&gt; values </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">[</code><code style="color:#009900;">0</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">&gt;&gt;&gt; values[</code><code style="color:#009900;">1</code><code style="color:#000000;">] </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">values</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">&gt;&gt;&gt; values</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">[</code><code style="color:#009900;">0</code><code style="color:#000000;">, [...], </code><code style="color:#009900;">2</code><code style="color:#000000;">]</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;"><span style="font-size:14px;">我预想应当是 </span><br></p><pre style="display:block;line-height:18px;white-space:pre;border:1px solid #dddddd;margin:10px 0px 10px 20px;padding:5px;background:#f6f6f6;">[0, [0, 1, 2], 2]</pre><p style="margin:8px 0px;"><span style="font-size:14px;">但结果却为何要赋值无限次？</span></p><p style="margin:8px 0px;"><span style="font-size:14px;"></span></p><p style="margin:8px 0px;"><span style="font-size:14px;color:#222222;">可以说 Python 没有赋值，只有引用。你这样相当于创建了一个引用自身的结构，所以导致了无限循环。为了理解这个问题，有个基本概念需要搞清楚。</span><br><span style="font-size:14px;color:#222222;">Python 没有「变量」，我们平时所说的变量其实只是「标签」，是引用。</span></p><p style="margin:8px 0px;"><span style="font-size:14px;color:#222222;">执行 </span></p><pre style="display:block;line-height:18px;white-space:pre;border:1px solid #dddddd;margin:10px 0px 10px 20px;padding:5px;background:#f6f6f6;">values = [0, 1, 2]</pre><p style="margin:8px 0px;"><span style="font-size:14px;color:#222222;">的时候，Python 做的事情是首先创建一个列表对象 [0, 1, 2]，然后给它贴上名为 values 的标签。如果随后又执行</span><br></p><pre style="display:block;line-height:18px;white-space:pre;border:1px solid #dddddd;margin:10px 0px 10px 20px;padding:5px;background:#f6f6f6;">values = [3, 4, 5]</pre><p style="margin:8px 0px;"><span style="font-size:14px;color:#222222;">的话，Python 做的事情是创建另一个列表对象 [3, 4, 5]，然后把刚才那张名为 values 的标签从前面的 [0, 1, 2] 对象上撕下来，重新贴到 [3, 4, 5] 这个对象上。</span><br><span style="font-size:14px;color:#222222;">至始至终，并没有一个叫做 values 的列表对象容器存在，Python 也没有把任何对象的值复制进 values 去。过程如图所示：</span><br><a style="color:#ff8373;" href="21011458_e6oW.jpg.avi"><img style="border:1px solid #dddddd;margin:10px 0px;padding:5px;background:#f4f7f9;" src="21011458_e6oW.jpg.avi"></a></p><p style="margin:8px 0px;"><span style="font-size:14px;color:#222222;">执行</span></p><pre style="display:block;line-height:18px;white-space:pre;border:1px solid #dddddd;margin:10px 0px 10px 20px;padding:5px;background:#f6f6f6;">values[1] = values</pre><p style="margin:8px 0px;"><span style="font-size:14px;color:#222222;">的时候，Python 做的事情则是把 values 这个标签所引用的列表对象的第二个元素指向 values 所引用的列表对象本身。执行完毕后，values 标签还是指向原来那个对象，只不过那个对象的结构发生了变化，从之前的列表 [0, 1, 2] 变成了 [0, ?, 2]，而这个 ? 则是指向那个对象本身的一个引用。如图所示：</span><br><a style="color:#ff8373;" href="21011459_8n1Y.jpg.avi"><img style="border:1px solid #dddddd;margin:10px 0px;padding:5px;background:#f4f7f9;" src="21011459_8n1Y.jpg.avi"></a><br><span style="font-size:14px;color:#222222;">要达到你所需要的效果，即得到 [0, [0, 1, 2], 2] 这个对象，你不能直接将 values[1] 指向 values 引用的对象本身，而是需要吧 [0, 1, 2] 这个对象「复制」一遍，得到一个新对象，再将 values[1] 指向这个复制后的对象。Python 里面复制对象的操作因对象类型而异，复制列表 values 的操作是</span></p><pre style="display:block;line-height:18px;white-space:pre;border:1px solid #dddddd;margin:10px 0px 10px 20px;padding:5px;background:#f6f6f6;">values[:] #生成对象的拷贝或者是复制序列，不再是引用和共享变量，但此法只能顶层复制</pre><p style="margin:8px 0px;"><span style="font-size:14px;color:#222222;">所以你需要执行</span><br></p><pre style="display:block;line-height:18px;white-space:pre;border:1px solid #dddddd;margin:10px 0px 10px 20px;padding:5px;background:#f6f6f6;">values[1] = values[:]</pre><p style="margin:8px 0px;"><span style="font-size:14px;color:#222222;">Python 做的事情是，先 dereference 得到 values 所指向的对象 [0, 1, 2]，然后执行 [0, 1, 2][:] 复制操作得到一个新的对象，内容也是 [0, 1, 2]，然后将 values 所指向的列表对象的第二个元素指向这个复制二来的列表对象，最终 values 指向的对象是 [0, [0, 1, 2], 2]。过程如图所示：</span><br><a style="color:#ff8373;" href="21011459_EJcH.jpg.avi"><img style="border:1px solid #dddddd;margin:10px 0px;padding:5px;background:#f4f7f9;" src="21011459_EJcH.jpg.avi"></a></p><p style="margin:8px 0px;"><span style="font-size:14px;color:#222222;">往更深处说，values[:] 复制操作是所谓的「浅复制」(shallow copy)，当列表对象有嵌套的时候也会产生出乎意料的错误，比如</span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">a </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">[</code><code style="color:#009900;">0</code><code style="color:#000000;">, [</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">], </code><code style="color:#009900;">3</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">b </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">a[:]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">a[</code><code style="color:#009900;">0</code><code style="color:#000000;">] </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#009900;">8</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">a[</code><code style="color:#009900;">1</code><code style="color:#000000;">][</code><code style="color:#009900;">1</code><code style="color:#000000;">] </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#009900;">9</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;"><span style="font-size:14px;color:#222222;">问：此时 a 和 b 分别是多少？</span><br><span style="font-size:14px;color:#222222;">正确答案是 a 为 [8, [1, 9], 3]，b 为 [0, [1, 9], 3]。发现没？b 的第二个元素也被改变了。想想是为什么？不明白的话看下图</span><br><a style="color:#ff8373;" href="21011459_MqCC.jpg.avi"><img style="border:1px solid #dddddd;margin:10px 0px;padding:5px;background:#f4f7f9;" src="21011459_MqCC.jpg.avi"></a></p><p style="margin:8px 0px;"><span style="font-size:14px;color:#222222;">正确的复制嵌套元素的方法是进行「深复制」(deep copy)，方法是</span></p><p style="margin:8px 0px;"><span style="color:#222222;"></span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">6</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">import</code> <code style="color:#000000;">copy</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">a </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">[</code><code style="color:#009900;">0</code><code style="color:#000000;">, [</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">], </code><code style="color:#009900;">3</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">b </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">copy.deepcopy(a)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">a[</code><code style="color:#009900;">0</code><code style="color:#000000;">] </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#009900;">8</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">a[</code><code style="color:#009900;">1</code><code style="color:#000000;">][</code><code style="color:#009900;">1</code><code style="color:#000000;">] </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#009900;">9</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;"><a style="color:#ff8373;" href="21011459_E4CB.jpg.avi"><img style="border:1px solid #dddddd;margin:10px 0px;padding:5px;background:#f4f7f9;" src="21011459_E4CB.jpg.avi"></a></p><span></span><h3 style="font-size:16px;font-weight:normal;line-height:28px;margin:15px 0px 10px;"><span style="font-size:14px;background:#ffe500;">2、引用 VS 拷贝：</span></h3><p style="margin:8px 0px;"><span style="font-size:14px;">（1）没有限制条件的分片表达式（L[:]）能够复制序列，但此法只能浅层复制。</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">（2）字典 copy 方法，D.copy() 能够复制字典，但此法只能浅层复制</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">（3）有些内置函数，例如 list，能够生成拷贝 list(L)</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">（4）copy 标准库模块能够生成完整拷贝：deepcopy 本质上是递归 copy</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">（5）对于不可变对象和可变对象来说，<span style="color:#222222;background:#ffffff;">浅复制<span style="background:#ffffff;">都是复制的引用，只是因为复制不变对象和复制不变对象的引用是等效的（因为对象不可变，当改变时会新建对象重新赋值）。</span>所以看起来浅复制<span style="background:#ffffff;">只复制不可变对象（整数，实数，字符串等），对于可变对象，浅复制其实是创建了一个对于该对象的引用，也就是说只是给同一个对象贴上了另一个标签而已。</span></span></span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">6</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">7</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">8</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">9</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">10</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">11</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">12</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">13</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">14</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">15</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">16</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">17</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">18</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">19</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">20</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">21</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">22</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">23</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">24</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">25</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">26</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">L </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">, </code><code style="color:#009900;">3</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">D </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">{</code><code style="color:#0000ff;">'a'</code><code style="color:#000000;">:</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#0000ff;">'b'</code><code style="color:#000000;">:</code><code style="color:#009900;">2</code><code style="color:#000000;">}</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">A </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">L[:]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">B </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">D.copy()</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#0000ff;">"L, D"</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code>  <code style="color:#000000;">L, D</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#0000ff;">"A, B"</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#000000;">A, B</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#0000ff;">"--------------------"</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">A[</code><code style="color:#009900;">1</code><code style="color:#000000;">] </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#0000ff;">'NI'</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">B[</code><code style="color:#0000ff;">'c'</code><code style="color:#000000;">] </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#0000ff;">'spam'</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#0000ff;">"L, D"</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code>  <code style="color:#000000;">L, D</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#0000ff;">"A, B"</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#000000;">A, B</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">L, D</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">, </code><code style="color:#009900;">3</code><code style="color:#000000;">] {</code><code style="color:#0000ff;">'a'</code><code style="color:#000000;">: </code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#0000ff;">'b'</code><code style="color:#000000;">: </code><code style="color:#009900;">2</code><code style="color:#000000;">}</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">A, B</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">, </code><code style="color:#009900;">3</code><code style="color:#000000;">] {</code><code style="color:#0000ff;">'a'</code><code style="color:#000000;">: </code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#0000ff;">'b'</code><code style="color:#000000;">: </code><code style="color:#009900;">2</code><code style="color:#000000;">}</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">L, D</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">, </code><code style="color:#009900;">3</code><code style="color:#000000;">] {</code><code style="color:#0000ff;">'a'</code><code style="color:#000000;">: </code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#0000ff;">'b'</code><code style="color:#000000;">: </code><code style="color:#009900;">2</code><code style="color:#000000;">}</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">A, B</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#0000ff;">'NI'</code><code style="color:#000000;">, </code><code style="color:#009900;">3</code><code style="color:#000000;">] {</code><code style="color:#0000ff;">'a'</code><code style="color:#000000;">: </code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#0000ff;">'c'</code><code style="color:#000000;">: </code><code style="color:#0000ff;">'spam'</code><code style="color:#000000;">, </code><code style="color:#0000ff;">'b'</code><code style="color:#000000;">: </code><code style="color:#009900;">2</code><code style="color:#000000;">}</code></div></div></td></tr></tbody></table></div></div><span></span><h3 style="font-size:16px;font-weight:normal;line-height:28px;margin:15px 0px 10px;"><span style="font-size:14px;background:#ffe500;">3、增强赋值以及共享引用：</span></h3><p style="margin:8px 0px;"><span style="font-size:14px;">x = x + y，x 出现两次，必须执行两次，性能不好，合并必须新建对象 x，然后复制两个列表合并</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">属于复制/拷贝</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">x += y，x 只出现一次，也只会计算一次，性能好，不生成新对象，只在内存块末尾增加元素。</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">当 x、y 为list时， += 会自动调用 extend 方法进行合并运算，in-place change。</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">属于共享引用</span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">6</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">7</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">8</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">9</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">10</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">11</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">12</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">13</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">14</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">L </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">M </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">L</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">L </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">L </code><code style="font-weight:bold;color:#006699;">+</code> <code style="color:#000000;">[</code><code style="color:#009900;">3</code><code style="color:#000000;">, </code><code style="color:#009900;">4</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#000000;">L, M</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#0000ff;">"-------------------"</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">L </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">M </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">L</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">L </code><code style="font-weight:bold;color:#006699;">+</code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">[</code><code style="color:#009900;">3</code><code style="color:#000000;">, </code><code style="color:#009900;">4</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#000000;">L, M</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">, </code><code style="color:#009900;">3</code><code style="color:#000000;">, </code><code style="color:#009900;">4</code><code style="color:#000000;">] [</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code><code style="font-weight:bold;color:#006699;">-</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">, </code><code style="color:#009900;">3</code><code style="color:#000000;">, </code><code style="color:#009900;">4</code><code style="color:#000000;">] [</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">, </code><code style="color:#009900;">3</code><code style="color:#000000;">, </code><code style="color:#009900;">4</code><code style="color:#000000;">]</code></div></div></td></tr></tbody></table></div></div><span></span><h3 style="font-size:16px;font-weight:normal;line-height:28px;margin:15px 0px 10px;"><span style="font-size:14px;background:#ffe500;">4、python 从 2k 到 3k，语句变函数引发的变量作用域问题  </span></h3><p style="margin:8px 0px;"><span style="font-size:14px;">先看段代码：</span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">6</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">7</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">8</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">9</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">def</code> <code style="color:#000000;">test():</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#000000;">a </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#808080;">False</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="font-weight:bold;color:#006699;">exec</code> <code style="color:#000000;">(</code><code style="color:#0000ff;">"a = True"</code><code style="color:#000000;">)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#ff1493;">print</code> <code style="color:#000000;">(</code><code style="color:#0000ff;">"a = "</code><code style="color:#000000;">, a)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">test()</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">b </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#808080;">False</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">exec</code> <code style="color:#000000;">(</code><code style="color:#0000ff;">"b = True"</code><code style="color:#000000;">)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#000000;">(</code><code style="color:#0000ff;">"b = "</code><code style="color:#000000;">, b)</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;"><span style="font-size:14px;">在 python 2k 和 3k 下 你会发现他们的结果不一样：</span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">6</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">7</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#009900;">2K</code><code style="color:#000000;">：</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">a </code><code style="font-weight:bold;color:#006699;">=</code>  <code style="color:#808080;">True</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">b </code><code style="font-weight:bold;color:#006699;">=</code>  <code style="color:#808080;">True</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#009900;">3K</code><code style="color:#000000;">：</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">a </code><code style="font-weight:bold;color:#006699;">=</code>  <code style="color:#808080;">False</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">b </code><code style="font-weight:bold;color:#006699;">=</code>  <code style="color:#808080;">True</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;"><span style="font-size:14px;">这是为什么呢？</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">因为 3k 中 exec 由语句变成函数了，而在函数中变量默认都是局部的，也就是说</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">你所见到的两个 a，是两个不同的变量，分别处于不同的命名空间中，而不会冲突。</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">具体参考 《learning python》P331-P332</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">知道原因了，我们可以这么改改：</span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">6</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">7</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">8</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">9</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">10</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">11</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">12</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">def</code> <code style="color:#000000;">test():</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#000000;">a </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#808080;">False</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#000000;">ldict </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#ff1493;">locals</code><code style="color:#000000;">()</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="font-weight:bold;color:#006699;">exec</code><code style="color:#000000;">(</code><code style="color:#0000ff;">"a=True"</code><code style="color:#000000;">,</code><code style="color:#ff1493;">globals</code><code style="color:#000000;">(),ldict)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#000000;">a </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">ldict[</code><code style="color:#0000ff;">'a'</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#ff1493;">print</code><code style="color:#000000;">(a)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">test()</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">b </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#808080;">False</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">exec</code><code style="color:#000000;">(</code><code style="color:#0000ff;">"b = True"</code><code style="color:#000000;">, </code><code style="color:#ff1493;">globals</code><code style="color:#000000;">())</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code><code style="color:#000000;">(</code><code style="color:#0000ff;">"b = "</code><code style="color:#000000;">, b)</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;"><span style="font-size:14px;">这个问题在 </span><span style="font-size:14px;">stackoverflow 上已经有人问了，而且 python 官方也有人报了 bug。。。</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">具体链接在下面：</span></p><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://stackoverflow.com/questions/7668724/variables-declared-in-execed-code-dont-become-local-in-python-3-documentatio">http://stackoverflow.com/questions/7668724/variables-declared-in-execed-code-dont-become-local-in-python-3-documentatio</a></p><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://bugs.python.org/issue4831">http://bugs.python.org/issue4831</a></p><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://stackoverflow.com/questions/1463306/how-does-exec-work-with-locals">http://stackoverflow.com/questions/1463306/how-does-exec-work-with-locals</a></p><p style="margin:8px 0px;"><span style="font-size:14px;">这是一个典型的 python 2k 移植到 3k 不兼容的案例，类似的还有很多，也算是移植的坑吧~</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">具体的 2k 与 3k 有哪些差异可以看这里：</span></p><p style="margin:8px 0px;"><span style="font-size:14px;color:#e53333;">使用 2to3 将代码移植到 Python 3</span></p><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://woodpecker.org.cn/diveintopython3/porting-code-to-python-3-with-2to3.html">http://woodpecker.org.cn/diveintopython3/porting-code-to-python-3-with-2to3.html</a></p><span></span><h3 style="font-size:16px;font-weight:normal;line-height:28px;margin:15px 0px 10px;"><span style="font-size:14px;background:#ffff00;">5、深入理解 python 变量作用域及其陷阱</span></h3><span></span><h4 style="font-size:14px;font-weight:normal;line-height:25px;margin:10px 0px;"><span style="background:#00b0f0;">5.1 可变对象 &amp; 不可变对象</span></h4><p style="margin:8px 0px;"><span style="font-size:14px;">在Python中，对象分为两种：可变对象和不可变对象，不可变对象包括int，float，long，str，tuple等，可变对象包括list，set，dict等。需要注意的是：这里说的不可变指的是值的不可变。对于不可变类型的变量，如果要更改变量，则会创建一个新值，把变量绑定到新值上，而旧值如果没有被引用就等待垃圾回收。另外，不可变的类型可以计算hash值，作为字典的key。可变类型数据对对象操作的时候，不需要再在其他地方申请内存，只需要在此对象后面连续申请(+/-)即可，也就是它的内存地址会保持不变，但区域会变长或者变短。</span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">6</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">7</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">8</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">9</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">10</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">11</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">12</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">13</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">14</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">15</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">16</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">17</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">&gt;&gt;&gt; a </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#0000ff;">'xianglong.me'</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">&gt;&gt;&gt; </code><code style="color:#ff1493;">id</code><code style="color:#000000;">(a)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#009900;">140443303134352</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">&gt;&gt;&gt; a </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#0000ff;">'1saying.com'</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">&gt;&gt;&gt; </code><code style="color:#ff1493;">id</code><code style="color:#000000;">(a)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#009900;">140443303131776</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#008200;"># 重新赋值之后，变量a的内存地址已经变了</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#008200;"># 'xianglong.me'是str类型，不可变，所以赋值操作知识重新创建了str '1saying.com'对象，然后将变量a指向了它</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;"> </code> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">&gt;&gt;&gt; a_list </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">, </code><code style="color:#009900;">3</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">&gt;&gt;&gt; </code><code style="color:#ff1493;">id</code><code style="color:#000000;">(a_list)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#009900;">140443302951680</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">&gt;&gt;&gt; a_list.append(</code><code style="color:#009900;">4</code><code style="color:#000000;">)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">&gt;&gt;&gt; </code><code style="color:#ff1493;">id</code><code style="color:#000000;">(a_list)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#009900;">140443302951680</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#008200;"># list重新赋值之后，变量a_list的内存地址并未改变</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#008200;"># [1, 2, 3]是可变的，append操作只是改变了其value，变量a_list指向没有变</code></div></div></td></tr></tbody></table></div></div><span></span><h4 style="font-size:14px;font-weight:normal;line-height:25px;margin:10px 0px;"><span style="background:#00b0f0;">5.2 函数值传递</span></h4><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">6</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">7</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">8</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">9</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">10</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">11</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">12</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">13</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">14</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">15</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">def</code> <code style="color:#000000;">func_int(a):</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#000000;">a </code><code style="font-weight:bold;color:#006699;">+</code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#009900;">4</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;"> </code> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">def</code> <code style="color:#000000;">func_list(a_list):</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#000000;">a_list[</code><code style="color:#009900;">0</code><code style="color:#000000;">] </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#009900;">4</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;"> </code> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">t </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#009900;">0</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">func_int(t)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#000000;">t</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#008200;"># output: 0</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;"> </code> </div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">t_list </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">2</code><code style="color:#000000;">, </code><code style="color:#009900;">3</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">func_list(t_list)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#000000;">t_list</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#008200;"># output: [4, 2, 3]</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;"><span style="font-size:14px;"></span></p><p style="margin:8px 0px;"><span style="font-size:14px;"> 对于上面的输出，不少Python初学者都比较疑惑：第一个例子看起来像是传值，而第二个例子确实传引用。其实，解释这个问题也非常容易，主要是因为可变对象和不可变对象的原因：对于可变对象，对象的操作不会重建对象，而对于不可变对象，每一次操作就重建新的对象。</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">    在函数参数传递的时候，Python其实就是把参数里传入的变量对应的对象的引用依次赋值给对应的函数内部变量。参照上面的例子来说明更容易理解，func_int中的局部变量"a"其实是全部变量"t"所指向对象的另一个引用，由于整数对象是不可变的，所以当func_int对变量"a"进行修改的时候，实际上是将局部变量"a"指向到了整数对象"1"。所以很明显，func_list修改的是一个可变的对象，局部变量"a"和全局变量"t_list"指向的还是同一个对象。</span></p><span></span><h4 style="font-size:14px;font-weight:normal;line-height:25px;margin:10px 0px;"><span style="background:#00b0f0;">5.3 为什么修改全局的dict变量不用global关键字</span></h4><p style="margin:8px 0px;"><span style="font-size:14px;">为什么修改字典d的值不用global关键字先声明呢？</span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">6</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">7</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">8</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">s </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#0000ff;">'foo'</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">d </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">{</code><code style="color:#0000ff;">'a'</code><code style="color:#000000;">:</code><code style="color:#009900;">1</code><code style="color:#000000;">}</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">def</code> <code style="color:#000000;">f():</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#000000;">s </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#0000ff;">'bar'</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#000000;">d[</code><code style="color:#0000ff;">'b'</code><code style="color:#000000;">] </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#009900;">2</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">f()</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#000000;">s  </code><code style="color:#008200;"># foo</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#000000;">d  </code><code style="color:#008200;"># {'a': 1, 'b': 2}</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;"><span style="font-size:14px;">这是因为，在s = 'bar'这句中，它是“有歧义的“，因为它既可以是表示引用全局变量s，也可以是创建一个新的局部变量，所以在python中，默认它的行为是创建局部变量，除非显式声明global，global定义的本地变量会变成其对应全局变量的一个别名，即是同一个变量。</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">在d['b']=2这句中，它是“明确的”，因为如果把d当作是局部变量的话，它会报KeyError，所以它只能是引用全局的d,故不需要多此一举显式声明global。</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">上面这两句赋值语句其实是不同的行为，一个是<span style="color:#ff0000;"><strong style="font-weight:bold;">rebinding（不可变对象）</strong></span>, 一个是<strong style="font-weight:bold;"><span style="color:#ff0000;">mutation（可变对象）</span></strong>.</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">但是如果是下面这样：</span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">6</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">d </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">{</code><code style="color:#0000ff;">'a'</code><code style="color:#000000;">:</code><code style="color:#009900;">1</code><code style="color:#000000;">}</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">def</code> <code style="color:#000000;">f():</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#000000;">d </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">{}</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#000000;">d[</code><code style="color:#0000ff;">'b'</code><code style="color:#000000;">] </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#009900;">2</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">f()</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#ff1493;">print</code> <code style="color:#000000;">d  </code><code style="color:#008200;"># {'a': 1}</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;"><span style="font-size:14px;"></span></p><p style="margin:8px 0px;"><span style="font-size:14px;">在d = {}这句，它是”有歧义的“了，所以它是创建了局部变量d，而不是引用全局变量d，所以d['b']=2也是操作的局部变量。</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">推而远之，这一切现象的本质就是”它是否是明确的“。</span></p><p style="margin:8px 0px;"><span style="font-size:14px;">仔细想想，就会发现不止dict不需要global，所有”明确的“东西都不需要global。因为int类型str类型之类的不可变对象，每一次操作就重建新的对象，他们只有一种修改方法，即x = y， 恰好这种修改方法同时也是创建变量的方法，所以产生了歧义，不知道是要修改还是创建。而dict/list/对象等可变对象，操作不会重建对象，可以通过dict['x']=y或list.append()之类的来修改，跟创建变量不冲突，不产生歧义，所以都不用显式global。</span></p><span></span><h4 style="font-size:14px;font-weight:normal;line-height:25px;margin:10px 0px;"><span style="background:#00b0f0;">5.4 陷阱：使用可变的默认参数</span></h4><p style="margin:8px 0px;"><span style="font-size:14px;">我多次见到过如下的代码：</span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">def</code> <code style="color:#000000;">foo(a, b, c</code><code style="font-weight:bold;color:#006699;">=</code><code style="color:#000000;">[]):</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#008200;"># append to c</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#008200;"># do some more stuff</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;"><span style="font-size:14px;"></span>永远不要使用可变的默认参数，可以使用如下的代码代替：</p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="font-weight:bold;color:#006699;">def</code> <code style="color:#000000;">foo(a, b, c</code><code style="font-weight:bold;color:#006699;">=</code><code style="color:#808080;">None</code><code style="color:#000000;">):</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="font-weight:bold;color:#006699;">if</code> <code style="color:#000000;">c </code><code style="font-weight:bold;color:#006699;">is</code> <code style="color:#808080;">None</code><code style="color:#000000;">:</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">        </code><code style="color:#000000;">c </code><code style="font-weight:bold;color:#006699;">=</code> <code style="color:#000000;">[]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#008200;"># append to c</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#40aa53;">    </code><code style="color:#008200;"># do some more stuff</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;"><span style="background:#ffe500;"></span>与其解释这个问题是什么，不如展示下使用可变默认参数的影响：<span style="background:#ffe500;"></span></p><div><div style="width:100%;margin:12px 0px;background:#ffffff;"><div style="width:11px;height:11px;font-size:10px;color:#ffffff;line-height:11px;background:#6ce26c;"><span><a style="display:block;color:#ffffff;text-align:center;padding:1px 0px 0px;" href="145911_p___currentPage+1__.htm#">?</a></span></div><table style="display:table;width:100%;line-height:13px;text-indent:0px;" cellpadding="0" cellspacing="0"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;color:#afafaf;"><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">1</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">2</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">3</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">4</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">5</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">6</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">7</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">8</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">9</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">10</div><div style="text-align:right;white-space:pre;border-width: 0px 1px 0px 0px;border-color: #ffffff #6ce26c #ffffff #ffffff;border-style: solid;padding:0px 6px 0px 12px;background:#ffffff;">11</div></td><td style="display:table-cell;width:100%;"><div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">In[</code><code style="color:#009900;">2</code><code style="color:#000000;">]: </code><code style="font-weight:bold;color:#006699;">def</code> <code style="color:#000000;">foo(a, b, c</code><code style="font-weight:bold;color:#006699;">=</code><code style="color:#000000;">[]):</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">...        c.append(a)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">...        c.append(b)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">...        </code><code style="color:#ff1493;">print</code><code style="color:#000000;">(c)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">...</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">In[</code><code style="color:#009900;">3</code><code style="color:#000000;">]: foo(</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">In[</code><code style="color:#009900;">4</code><code style="color:#000000;">]: foo(</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">]</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">In[</code><code style="color:#009900;">5</code><code style="color:#000000;">]: foo(</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">)</code></div><div style="white-space:pre;padding:0px 12px;background:#ffffff;"><code style="color:#000000;">[</code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">, </code><code style="color:#009900;">1</code><code style="color:#000000;">]</code></div></div></td></tr></tbody></table></div></div><p style="margin:8px 0px;">同一个变量c在函数调用的每一次都被反复引用。这可能有一些意想不到的后果。</p><p style="margin:8px 0px;"><span style="background:#ffe500;">REF：</span></p><p style="margin:8px 0px;">[1] 《learning python》：P130、P134、P202、P204 、P245</p><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://www.zhihu.com/question/21000872/answer/16856382">http://www.zhihu.com/question/21000872/answer/16856382</a></p><p style="margin:8px 0px;">[2] 理解 Python 的 LEGB</p><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://blog.segmentfault.com/sunisdown/1190000000640834">http://blog.segmentfault.com/sunisdown/1190000000640834</a></p><p style="margin:8px 0px;">[3] Python函数参数默认值的陷阱和原理深究</p><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://cenalulu.github.io/python/default-mutable-arguments/">http://cenalulu.github.io/python/default-mutable-arguments/</a><br></p><p style="margin:8px 0px;">[4] 潜在的Python陷阱</p><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://python.jobbole.com/81564/">http://python.jobbole.com/81564/</a><br></p><p style="margin:8px 0px;">[5] 陷阱！python参数默认值</p><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://segmentfault.com/a/1190000000743526">http://segmentfault.com/a/1190000000743526</a><br></p><p style="margin:8px 0px;">[6] Python中的变量、引用、拷贝和作用域</p><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://xianglong.me/article/python-variable-quote-copy-and-scope/">http://xianglong.me/article/python-variable-quote-copy-and-scope/</a><br></p><p style="margin:8px 0px;">[7] Python入门基础知识(1) :locals() 和globals()</p><p style="margin:8px 0px;"><a style="color:#ff8373;" href="http://www.cnblogs.com/wanxsb/archive/2013/05/07/3064783.html">http://www.cnblogs.com/wanxsb/archive/2013/05/07/3064783.html</a><br></p></div><div style="line-height:30px;border:1px solid #dddddd;margin:20px 0px;padding:8px 0px;"><strong style="font-weight:bold;margin:0px 0px 0px 15px;">分享到：</strong><a style="color:#4466bb;" onclick="document.location.reload();return false;" href="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=858381728',u=z||d.location,p=['&url=',e(u),'&title=',e(t||d.title),'&source=',e(r),'&sourceUrl=',e(l),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,'','','','python%E5%9F%BA%E7%A1%80%EF%BC%885%EF%BC%89%EF%BC%9A%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%20python%20%E4%B8%AD%E7%9A%84%E8%B5%8B%E5%80%BC%E3%80%81%E5%BC%95%E7%94%A8%E3%80%81%E6%8B%B7%E8%B4%9D%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F:%20%E5%9C%A8%20python%20%E4%B8%AD%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5%E6%80%BB%E6%98%AF%E5%BB%BA%E7%AB%8B%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%95%E7%94%A8%E5%80%BC%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E5%A4%8D%E5%88%B6%E5%AF%B9%E8%B1%A1%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8Cpython%20%E5%8F%98%E9%87%8F%E6%9B%B4%E5%83%8F%E6%98%AF%E6%8C%87%E9%92%88%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%8C%BA%E5%9F%9F%EF%BC%8C%20%E8%BF%99%E7%82%B9%E5%92%8C%E5%A4%A7%E5%A4%9A%E6%95%B0%20OO%20%E8%AF%AD%E8%A8%80%E7%B1%BB%E4%BC%BC%E5%90%A7%EF%BC%8C%E6%AF%94%E5%A6%82%20C++%E3%80%81java%20%E7%AD%89%20~%20...','','utf-8'));" id="538"><img style="height:45px;margin:3px 8px;" src="sinaweibo_fb1.png_t_139.png"></a><a style="color:#4466bb;" onclick="document.location.reload();return false;" href="javascript:(function(){window.open('http://v.t.qq.com/share/share.php?url='+encodeURIComponent(document.location)+'&appkey=96f54f97c4de46e393c4835a266207f4&site=&title='+encodeURIComponent(document.title)+encodeURIComponent(':%20%E5%9C%A8%20python%20%E4%B8%AD%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5%E6%80%BB%E6%98%AF%E5%BB%BA%E7%AB%8B%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%95%E7%94%A8%E5%80%BC%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E5%A4%8D%E5%88%B6%E5%AF%B9%E8%B1%A1%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8Cpython%20%E5%8F%98%E9%87%8F%E6%9B%B4%E5%83%8F%E6%98%AF%E6%8C%87%E9%92%88%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%8C%BA%E5%9F%9F%EF%BC%8C%20%E8%BF%99%E7%82%B9%E5%92%8C%E5%A4%A7%E5%A4%9A%E6%95%B0%20OO%20%E8%AF%AD%E8%A8%80%E7%B1%BB%E4%BC%BC%E5%90%A7%EF%BC%8C%E6%AF%94%E5%A6%82%20C++%E3%80%81java%20%E7%AD%89%20~%20...'),'',%20'width=450,%20height=400,%20top=0,%20left=0,%20toolbar=no,%20menubar=no,%20scrollbars=no,%20location=yes,%20resizable=no,%20status=no');}())" id="539"><img style="height:45px;margin:3px 8px;" src="tencent_weibo_fb.jpg_t_139"></a><span style="display:block;height:30px;float:right;color:#ffffff;margin:0px 5px 0px;padding:3px 8px;background:#5cc26f;" onclick="document.location.reload();" id="540"><span style="font-size:12px;padding:0px 3px;">4</span><span style="font-size:18px;padding:0px 3px;">赞</span></span></div><div style="font-size:12px;color:#666666;border:1px solid #dddddd;margin:20px 0px;padding:5px 15px;background:#ffffee;">声明：OSCHINA 博客文章版权属于作者，受法律保护。未经作者同意不得转载。 </div><div style="margin:10px 0px 20px;"><ul style="height:24px;font-weight:bold;list-style-type:none;"><li style="width:47%;float:left;list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog/145461">« 上一篇</a></li><li style="width:47%;float:right;text-align:right;list-style-type:none;"><a style="color:#4466bb;" href="http://my.oschina.net/leejun2005/blog/146025">下一篇 »</a></li></ul></div></div><div style="margin:10px 0px;"></div></div><div style="border:1px solid #eeeeee;margin:20px 0px 0px 230px;padding:10px 15px;background:#ffffff;"><div><h2 style="font-size:18px;font-weight:normal;color:#444444;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #cccccc #ffffff;border-style: solid;padding:5px 0px;"><a style="display:block;float:right;font-size:13px;font-weight:normal;color:#4466bb;" href="145911_p___currentPage+1__.htm" name="comments"></a>评论<em style="font-style:normal;font-size:12px;color:#5cc26f;padding:0px 5px;">3</em></h2><ul style="list-style-type:none;margin:10px 0px;"><li style="list-style-type:none;margin:0px 0px 10px;padding:5px 0px;"><table style="display:table;width:100%;text-indent:0px;"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;width:65px;overflow:hidden;padding:3px 0px 0px;"><a style="color:#4466bb;" href="http://my.oschina.net/u/138210" onclick="document.location.href=this.href;return false;" id="541"><img style="width:40px;height:40px;border:1px solid #f1f1f1;padding:2px;background:#ffffff;" src="138210_50.jpg_t_143.avi"></a></td><td style="display:table-cell;overflow:hidden;"><div style="font-size:12px;color:#666666;"><span>1</span>楼：<a style="font-weight:bold;color:#666666;" href="http://my.oschina.net/u/138210" name="145911">网名还没想好</a><span></span>发表于 <span>2014-03-03 10:15</span><a style="color:#4466bb;" onclick="document.location.href=this.href;return false;" id="542">回复此评论</a></div><div style="font-size:12px;color:#0000aa;margin:8px 0px 0px;">好文章，</div><div style="margin:10px 0px 0px;"></div></td></tr></tbody></table></li><li style="list-style-type:none;margin:0px 0px 10px;padding:5px 0px;background:#f6f6f6;"><table style="display:table;width:100%;text-indent:0px;"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;width:65px;overflow:hidden;padding:3px 0px 0px;"><a style="color:#4466bb;" href="http://my.oschina.net/u/1171288" onclick="document.location.href=this.href;return false;" id="543"><img style="width:40px;height:40px;border:1px solid #f1f1f1;padding:2px;background:#ffffff;" src="1171288_50.png_t_138.png"></a></td><td style="display:table-cell;overflow:hidden;"><div style="font-size:12px;color:#666666;"><span>2</span>楼：<a style="font-weight:bold;color:#666666;" href="http://my.oschina.net/u/1171288" name="145911">DeeperPlay</a><span></span>发表于 <span>2014-07-08 09:42</span><a style="color:#4466bb;" onclick="document.location.href=this.href;return false;" id="544">回复此评论</a></div><div style="font-size:12px;color:#0000aa;margin:8px 0px 0px;">文章很不错。另外，我想问一下，你的图片里面，那种有铅笔效果的箭头，是用什么软件画出来的，我很喜欢这样的风格。<img style="width:20px;margin:0px 2px;" alt="101" src="101.gif"></div><div style="margin:10px 0px 0px;"></div></td></tr></tbody></table></li><li style="list-style-type:none;margin:0px 0px 10px;padding:5px 0px;"><table style="display:table;width:100%;text-indent:0px;"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;width:65px;overflow:hidden;padding:3px 0px 0px;"><a style="color:#4466bb;" href="http://my.oschina.net/u/568818" onclick="document.location.href=this.href;return false;" id="545"><img style="width:40px;height:40px;border:1px solid #f1f1f1;padding:2px;background:#ffffff;" src="568818_50.jpg_t_134.avi"></a></td><td style="display:table-cell;overflow:hidden;"><div style="font-size:12px;color:#666666;"><span>3</span>楼：<a style="font-weight:bold;color:#666666;" href="http://my.oschina.net/u/568818" name="145911">xrzs</a><span></span>发表于 <span>2014-07-08 10:28</span><a style="color:#4466bb;" onclick="document.location.href=this.href;return false;" id="546">回复此评论</a></div><div style="font-size:12px;color:#0000aa;margin:8px 0px 0px;"><div style="color:#333333;border:1px solid #999999;margin:0px 0px 10px;padding:3px;background:#ffffee;"><h4 style="font-size:13px;font-weight:normal;color:#1e50a2;padding:2px 0px 3px;">引用来自“DeeperPlay”的评论</h4>文章很不错。另外，我想问一下，你的图片里面，那种有铅笔效果的箭头，是用什么软件画出来的，我很喜欢这样的风格。<img style="width:20px;margin:0px 2px;" alt="101" src="101.gif"></div>apple 出品的 Keynote，类似 ms 的 ppt 吧~</div><div style="margin:10px 0px 0px;"></div></td></tr></tbody></table></li></ul></div><ul style="height:28px;line-height:28px;list-style-type:none;margin:2px 0px;"></ul></div><div style="border:1px solid #eeeeee;margin:20px 0px 0px 230px;padding:10px 15px;background:#ffffff;"><a style="color:#4466bb;" href="145911_p___currentPage+1__.htm" name="comments"></a><div style="width:650px;"><form accept-charset="utf-8" action="http://my.oschina.net/action/blog/add_comment?blog=145911"><div style="float:left;margin:0px 0px 0px 10px;"><img style="width:40px;height:40px;border:1px solid #eeeeee;padding:2px;" alt="xrzs" src="portrait.gif_t_139.gif"></div><div style="width:650px;padding:0px 0px 0px 70px;"><textarea style="width:650px;height:80px;font-size:16px;color:#000000;border:1px solid #;" name="content" id="547"></textarea><p style="font-size:12px;margin:5px 0px;"><button style="display:block;float:right;font-weight:bold;color:#ffffff;text-align:center;padding:5px 10px;background:#5cc26f;" type="submit" id="548">发表评论</button>插入： <a style="color:#666666;border:1px solid #ffffff;padding:1px 2px 1px 18px;" onclick="document.location.reload();return false;" href="javascript:insert_emotions();" id="549">表情</a><a style="color:#666666;border:1px solid #ffffff;padding:1px 2px 1px 18px;" onclick="document.location.reload();return false;" href="javascript:insert_projects();" id="550">开源软件</a><span style="color:#999999;text-align:center;padding:20px 0px;"></span></p></div></form></div></div><div style="width:380px;height:160px;font-size:14px;border:1px solid #5cc26f;background:#ffffff;"><strong style="display:block;font-weight:bold;color:#ffffff;margin:0px 0px 10px;padding:2px 5px;background:#5cc26f;"><a style="display:block;float:right;font-size:12px;color:#ffffff;" href="145911_p___currentPage+1__.htm" onclick="document.location.reload();return false;" id="551">关闭</a>相关文章阅读</strong><ul style="list-style-type:none;margin:10px;"><li style="line-height:22px;list-style-type:none;"><span style="display:block;float:right;font-size:10px;color:#666666;">2010/09/11</span><a style="font-size:13px;color:#4466bb;padding:0px 0px 0px 15px;background:#ffffff url(http://my.oschina.net/img/a2.gif) no-repeat 0 50%;" href="http://my.oschina.net/flynewton/blog/7771">Python核心编程--Python基础...</a></li><li style="line-height:22px;list-style-type:none;"><span style="display:block;float:right;font-size:10px;color:#666666;">2014/03/02</span><a style="font-size:13px;color:#4466bb;padding:0px 0px 0px 15px;background:#ffffff url(http://my.oschina.net/img/a2.gif) no-repeat 0 50%;" href="http://my.oschina.net/u/618083/blog/204424">深入 Python :Dive Into Python 中文...</a></li><li style="line-height:22px;list-style-type:none;"><span style="display:block;float:right;font-size:10px;color:#666666;">2014/11/20</span><a style="font-size:13px;color:#4466bb;padding:0px 0px 0px 15px;background:#ffffff url(http://my.oschina.net/img/a2.gif) no-repeat 0 50%;" href="http://my.oschina.net/lpe234/blog/346939">python基础 -- 内建函数</a></li><li style="line-height:22px;list-style-type:none;"><span style="display:block;float:right;font-size:10px;color:#666666;">2014/09/12</span><a style="font-size:13px;color:#4466bb;padding:0px 0px 0px 15px;background:#ffffff url(http://my.oschina.net/img/a2.gif) no-repeat 0 50%;" href="http://my.oschina.net/luckysym/blog/312650">Python基础</a></li><li style="line-height:22px;list-style-type:none;"><span style="display:block;float:right;font-size:10px;color:#666666;">2012/05/04</span><a style="font-size:13px;color:#4466bb;padding:0px 0px 0px 15px;background:#ffffff url(http://my.oschina.net/img/a2.gif) no-repeat 0 50%;" href="http://my.oschina.net/DaisyYao/blog/56100">Python 基础——字符串maketrans()...</a></li></ul></div></div><div style="font-size:1px;clear:both;"></div><div style="height:38px;color:#666666;line-height:38px;text-align:center;border-width: 1px 0px 0px 0px;border-color: #cccccc #ffffff #ffffff #ffffff;border-style: solid;margin:20px 0px 0px;padding:0px 0px 50px;"><table style="display:table;width:100%;text-indent:0px;"><tbody style="display:table-row-group;"><tr style="display:table-row;"><td style="display:table-cell;text-align:left;" align="left">© 开源中国(OSChina.NET) | <a style="color:#4466bb;" href="http://www.oschina.net/home/aboutosc">关于我们</a>| <a style="color:#4466bb;" href="mailto:market@oschina.net">广告联系</a>| <a style="color:#4466bb;" href="http://weibo.com/oschina2010">@新浪微博</a>| <a style="color:#4466bb;" href="http://m.oschina.net/">开源中国手机版</a>| <a style="color:#737573;" href="http://www.miitbeian.gov.cn/">粤ICP备12009483号-3</a></td><td style="display:table-cell;width:220px;text-align:left;"><span style="display:block;width:140px;float:left;">开源中国手机客户端：</span><a style="display:block;width:16px;float:left;color:#4466bb;text-indent:-133320px;margin:0px 0px 0px 8px;" href="http://www.oschina.net/app">Android</a><a style="display:block;width:16px;float:left;color:#4466bb;text-indent:-133320px;margin:0px 0px 0px 8px;" href="http://www.oschina.net/app">iPhone</a><a style="display:block;width:16px;float:left;color:#4466bb;text-indent:-133320px;margin:0px 0px 0px 8px;" href="http://www.oschina.net/app">WP7</a></td></tr><tr style="display:table-row;"><td style="display:table-cell;text-align:left;" align="left" colspan="2">开源中国社区(OSChina.net)是工信部 <a style="color:#4466bb;" href="http://www.copu.org.cn/">开源软件推进联盟</a>指定的官方社区</td></tr></tbody></table></div></div></body></html>
